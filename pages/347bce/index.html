<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Redis过期删除策略 | Tavio&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.jpg">
    <meta name="description" content="后端技术博客,别让自己落后于技术的迭代">
    <meta name="keywords" content="鲜衣努码少年郎">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.3d594d45.css" as="style"><link rel="preload" href="/assets/js/app.c6ba13aa.js" as="script"><link rel="preload" href="/assets/js/2.8d9f533d.js" as="script"><link rel="preload" href="/assets/js/76.668519a5.js" as="script"><link rel="prefetch" href="/assets/js/10.3c6e6522.js"><link rel="prefetch" href="/assets/js/11.09bc43b4.js"><link rel="prefetch" href="/assets/js/12.a996a87c.js"><link rel="prefetch" href="/assets/js/13.b02d3acf.js"><link rel="prefetch" href="/assets/js/14.64fd6e84.js"><link rel="prefetch" href="/assets/js/15.089c02a9.js"><link rel="prefetch" href="/assets/js/16.8fa236f4.js"><link rel="prefetch" href="/assets/js/17.a1730b7a.js"><link rel="prefetch" href="/assets/js/18.1335a425.js"><link rel="prefetch" href="/assets/js/19.9293cbc0.js"><link rel="prefetch" href="/assets/js/20.5d0fd1df.js"><link rel="prefetch" href="/assets/js/21.4319dddd.js"><link rel="prefetch" href="/assets/js/22.2d6d1193.js"><link rel="prefetch" href="/assets/js/23.f154e330.js"><link rel="prefetch" href="/assets/js/24.66ba0133.js"><link rel="prefetch" href="/assets/js/25.5979047a.js"><link rel="prefetch" href="/assets/js/26.04889c33.js"><link rel="prefetch" href="/assets/js/27.337928e8.js"><link rel="prefetch" href="/assets/js/28.665066df.js"><link rel="prefetch" href="/assets/js/29.5aa838b8.js"><link rel="prefetch" href="/assets/js/3.1aac6e80.js"><link rel="prefetch" href="/assets/js/30.a8923cf6.js"><link rel="prefetch" href="/assets/js/31.a290d548.js"><link rel="prefetch" href="/assets/js/32.cb2b7fdd.js"><link rel="prefetch" href="/assets/js/33.3286dca2.js"><link rel="prefetch" href="/assets/js/34.9aebb473.js"><link rel="prefetch" href="/assets/js/35.5777ff14.js"><link rel="prefetch" href="/assets/js/36.5c29dd6e.js"><link rel="prefetch" href="/assets/js/37.cbf6fde7.js"><link rel="prefetch" href="/assets/js/38.2a1572ab.js"><link rel="prefetch" href="/assets/js/39.000aacf6.js"><link rel="prefetch" href="/assets/js/4.16da1e3f.js"><link rel="prefetch" href="/assets/js/40.8fbbcfa8.js"><link rel="prefetch" href="/assets/js/41.1b995757.js"><link rel="prefetch" href="/assets/js/42.575e5238.js"><link rel="prefetch" href="/assets/js/43.0a4cb54f.js"><link rel="prefetch" href="/assets/js/44.8d3b4283.js"><link rel="prefetch" href="/assets/js/45.ae001bba.js"><link rel="prefetch" href="/assets/js/46.fc29dcb1.js"><link rel="prefetch" href="/assets/js/47.628ee1ef.js"><link rel="prefetch" href="/assets/js/48.7d4f854a.js"><link rel="prefetch" href="/assets/js/49.e848253a.js"><link rel="prefetch" href="/assets/js/5.20e9c2cf.js"><link rel="prefetch" href="/assets/js/50.045225be.js"><link rel="prefetch" href="/assets/js/51.d05a2035.js"><link rel="prefetch" href="/assets/js/52.35a2519d.js"><link rel="prefetch" href="/assets/js/53.ca8d5bc8.js"><link rel="prefetch" href="/assets/js/54.eb93e6ae.js"><link rel="prefetch" href="/assets/js/55.27ff3cca.js"><link rel="prefetch" href="/assets/js/56.4a98635a.js"><link rel="prefetch" href="/assets/js/57.db243c6d.js"><link rel="prefetch" href="/assets/js/58.650ffef2.js"><link rel="prefetch" href="/assets/js/59.9af578d0.js"><link rel="prefetch" href="/assets/js/6.cf5ce51d.js"><link rel="prefetch" href="/assets/js/60.800afb74.js"><link rel="prefetch" href="/assets/js/61.59b23cca.js"><link rel="prefetch" href="/assets/js/62.35998712.js"><link rel="prefetch" href="/assets/js/63.824df362.js"><link rel="prefetch" href="/assets/js/64.2f51e9d0.js"><link rel="prefetch" href="/assets/js/65.926e2499.js"><link rel="prefetch" href="/assets/js/66.2af85da2.js"><link rel="prefetch" href="/assets/js/67.bbd8d4b3.js"><link rel="prefetch" href="/assets/js/68.163c774f.js"><link rel="prefetch" href="/assets/js/69.deed8d29.js"><link rel="prefetch" href="/assets/js/7.92776da2.js"><link rel="prefetch" href="/assets/js/70.d6a81068.js"><link rel="prefetch" href="/assets/js/71.9adb8c50.js"><link rel="prefetch" href="/assets/js/72.9ba26fc5.js"><link rel="prefetch" href="/assets/js/73.c3ee5d2f.js"><link rel="prefetch" href="/assets/js/74.af7973c7.js"><link rel="prefetch" href="/assets/js/75.ed8e7990.js"><link rel="prefetch" href="/assets/js/77.d6cb2694.js"><link rel="prefetch" href="/assets/js/78.494cff39.js"><link rel="prefetch" href="/assets/js/79.486534af.js"><link rel="prefetch" href="/assets/js/8.d7fc67a9.js"><link rel="prefetch" href="/assets/js/80.c60f84eb.js"><link rel="prefetch" href="/assets/js/81.80ab610c.js"><link rel="prefetch" href="/assets/js/82.38a483d0.js"><link rel="prefetch" href="/assets/js/83.72b7d6a4.js"><link rel="prefetch" href="/assets/js/84.f5a347be.js"><link rel="prefetch" href="/assets/js/85.f3b7b32b.js"><link rel="prefetch" href="/assets/js/86.1d47bd30.js"><link rel="prefetch" href="/assets/js/87.2361eddb.js"><link rel="prefetch" href="/assets/js/88.aef9e475.js"><link rel="prefetch" href="/assets/js/89.0a95e3be.js"><link rel="prefetch" href="/assets/js/9.f6c9df9a.js"><link rel="prefetch" href="/assets/js/90.ddf7b632.js"><link rel="prefetch" href="/assets/js/91.2a96bacf.js"><link rel="prefetch" href="/assets/js/92.f61fc5ec.js"><link rel="prefetch" href="/assets/js/93.40a17799.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3d594d45.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.jpg" alt="Tavio's blog" class="logo"> <span class="site-name can-hide">Tavio's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/jvm/" class="nav-link">JVM底层原理</a></li><li class="dropdown-item"><!----> <a href="/node/thread/" class="nav-link">邪恶多线程</a></li><li class="dropdown-item"><!----> <a href="/node/mybatis/" class="nav-link">MyBatis底层原理</a></li><li class="dropdown-item"><!----> <a href="/node/spring/" class="nav-link">Spring底层原理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/db/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/mysql/" class="nav-link">MySQL的优化之路</a></li><li class="dropdown-item"><!----> <a href="/note/clickhouse/" class="nav-link">ClickHouse的高性能</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis的快速查询</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/middleware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/rabbitmq/" class="nav-link">RabbitMQ的生产</a></li><li class="dropdown-item"><!----> <a href="/note/kafka/" class="nav-link">Kafka的高吞吐量</a></li><li class="dropdown-item"><!----> <a href="/note/es/" class="nav-link">ES的入门到入坑</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><a href="/practice/" class="link-title">实践</a> <span class="title" style="display:none;">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/284351/" class="nav-link">MySQL自增ID主键空洞</a></li><li class="dropdown-item"><!----> <a href="/pages/8f1df0/" class="nav-link">前端实现长整型排序</a></li><li class="dropdown-item"><!----> <a href="/pages/13fcc3/" class="nav-link">MySQL无感换表</a></li><li class="dropdown-item"><!----> <a href="/pages/69e163/" class="nav-link">Redis延时双删</a></li><li class="dropdown-item"><!----> <a href="/pages/f43494/" class="nav-link">高并发秒杀优惠卷</a></li><li class="dropdown-item"><!----> <a href="/pages/ab9a49/" class="nav-link">AOP无侵入式告警</a></li><li class="dropdown-item"><!----> <a href="/pages/a3f3fd/" class="nav-link">长短链接跳转</a></li><li class="dropdown-item"><!----> <a href="/pages/942d4b/" class="nav-link">订单超时取消</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/tavio-zhang/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.jpg"> <div class="blogger-info"><h3>Tavio Zhang</h3> <span>努力学习的小码喽</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/jvm/" class="nav-link">JVM底层原理</a></li><li class="dropdown-item"><!----> <a href="/node/thread/" class="nav-link">邪恶多线程</a></li><li class="dropdown-item"><!----> <a href="/node/mybatis/" class="nav-link">MyBatis底层原理</a></li><li class="dropdown-item"><!----> <a href="/node/spring/" class="nav-link">Spring底层原理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/db/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/mysql/" class="nav-link">MySQL的优化之路</a></li><li class="dropdown-item"><!----> <a href="/note/clickhouse/" class="nav-link">ClickHouse的高性能</a></li><li class="dropdown-item"><!----> <a href="/note/redis/" class="nav-link">Redis的快速查询</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="中间件" class="dropdown-title"><a href="/middleware/" class="link-title">中间件</a> <span class="title" style="display:none;">中间件</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/rabbitmq/" class="nav-link">RabbitMQ的生产</a></li><li class="dropdown-item"><!----> <a href="/note/kafka/" class="nav-link">Kafka的高吞吐量</a></li><li class="dropdown-item"><!----> <a href="/note/es/" class="nav-link">ES的入门到入坑</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="实践" class="dropdown-title"><a href="/practice/" class="link-title">实践</a> <span class="title" style="display:none;">实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/284351/" class="nav-link">MySQL自增ID主键空洞</a></li><li class="dropdown-item"><!----> <a href="/pages/8f1df0/" class="nav-link">前端实现长整型排序</a></li><li class="dropdown-item"><!----> <a href="/pages/13fcc3/" class="nav-link">MySQL无感换表</a></li><li class="dropdown-item"><!----> <a href="/pages/69e163/" class="nav-link">Redis延时双删</a></li><li class="dropdown-item"><!----> <a href="/pages/f43494/" class="nav-link">高并发秒杀优惠卷</a></li><li class="dropdown-item"><!----> <a href="/pages/ab9a49/" class="nav-link">AOP无侵入式告警</a></li><li class="dropdown-item"><!----> <a href="/pages/a3f3fd/" class="nav-link">长短链接跳转</a></li><li class="dropdown-item"><!----> <a href="/pages/942d4b/" class="nav-link">订单超时取消</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/tavio-zhang/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/pages/eada73/" class="sidebar-link">Redis核心数据结构</a></li><li><a href="/pages/d81738/" class="sidebar-link">Redis持久化机制</a></li><li><a href="/pages/797c36/" class="sidebar-link">Redis高可用架构</a></li><li><a href="/pages/88227a/" class="sidebar-link">Redis分布式锁</a></li><li><a href="/pages/ea330e/" class="sidebar-link">Redis缓存设计</a></li><li><a href="/pages/d2662c/" class="sidebar-link">Redis大Key与热Key</a></li><li><a href="/pages/dd29df/" class="sidebar-link">Redis限流</a></li><li><a href="/pages/aeefc4/" class="sidebar-link">Redis IO多路复用</a></li><li><a href="/pages/347bce/" aria-current="page" class="active sidebar-link">Redis过期删除策略</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/347bce/#一、先搞懂-redis为什么不搞-精确过期删除" class="sidebar-link">一、先搞懂：Redis为什么不搞“精确过期删除”？</a></li><li class="sidebar-sub-header level2"><a href="/pages/347bce/#二、三大核心策略拆解-惰性删除-定期删除-内存淘汰" class="sidebar-link">二、三大核心策略拆解：惰性删除+定期删除+内存淘汰</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_1-惰性删除-用的时候再检查-最省cpu的被动策略" class="sidebar-link">1. 惰性删除：“用的时候再检查”，最省CPU的被动策略</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#核心原理" class="sidebar-link">核心原理</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#优缺点分析" class="sidebar-link">优缺点分析</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#适用场景" class="sidebar-link">适用场景</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_2-定期删除-每隔一段时间扫一批-平衡cpu和内存的主动策略" class="sidebar-link">2. 定期删除：“每隔一段时间扫一批”，平衡CPU和内存的主动策略</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#核心原理-2" class="sidebar-link">核心原理</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#关键配置参数" class="sidebar-link">关键配置参数</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#优缺点分析-2" class="sidebar-link">优缺点分析</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_3-内存淘汰机制-内存满了再清理-最后的兜底策略" class="sidebar-link">3. 内存淘汰机制：“内存满了再清理”，最后的兜底策略</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#核心原理-3" class="sidebar-link">核心原理</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#_7种核心淘汰策略-redis-6-2" class="sidebar-link">7种核心淘汰策略（Redis 6.2+）</a></li><li class="sidebar-sub-header level4"><a href="/pages/347bce/#优缺点分析-3" class="sidebar-link">优缺点分析</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/347bce/#三、协同工作流程-redis是如何组合三种策略的" class="sidebar-link">三、协同工作流程：Redis是如何组合三种策略的？</a></li><li class="sidebar-sub-header level2"><a href="/pages/347bce/#四、实战配置优化-不同业务场景的最优方案" class="sidebar-link">四、实战配置优化：不同业务场景的最优方案</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_1-通用缓存场景-如电商商品缓存、接口缓存" class="sidebar-link">1. 通用缓存场景（如电商商品缓存、接口缓存）</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_2-核心数据缓存场景-如用户登录状态、订单信息" class="sidebar-link">2. 核心数据缓存场景（如用户登录状态、订单信息）</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_3-临时数据场景-如验证码、临时会话" class="sidebar-link">3. 临时数据场景（如验证码、临时会话）</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#_4-不允许数据丢失场景-如金融交易记录缓存" class="sidebar-link">4. 不允许数据丢失场景（如金融交易记录缓存）</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/347bce/#五、常见坑点与避坑指南" class="sidebar-link">五、常见坑点与避坑指南</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/347bce/#坑1-设置了expire-但key依然长期存在" class="sidebar-link">坑1：设置了expire，但key依然长期存在</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#坑2-redis突然响应变慢-cpu占用飙升" class="sidebar-link">坑2：Redis突然响应变慢，CPU占用飙升</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#坑3-核心未过期key被淘汰-导致业务异常" class="sidebar-link">坑3：核心未过期key被淘汰，导致业务异常</a></li><li class="sidebar-sub-header level3"><a href="/pages/347bce/#坑4-认为-expire设置后-key一定会在到期时删除" class="sidebar-link">坑4：认为“expire设置后，key一定会在到期时删除”</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/347bce/#六、总结-redis过期删除的核心逻辑" class="sidebar-link">六、总结：Redis过期删除的核心逻辑</a></li></ul></li><li><a href="/pages/390684/" class="sidebar-link">Redis Bitmap</a></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/note/redis/#《Redis》笔记" data-v-06225672>《Redis》笔记</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/tavio-zhang" target="_blank" title="作者" class="beLink" data-v-06225672>Tavio</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2024-01-13</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">Redis过期删除策略<!----></h1>  <div class="theme-vdoing-content content__default"><p>在使用Redis的过程中，你是否遇到过这样的问题：明明给key设置了过期时间（expire），但到点后key却依然存在，导致内存占用居高不下？或者偶尔出现Redis响应变慢，排查后发现是大量过期key集中删除导致的？</p> <p>这一切的根源，都在于Redis的<strong>过期删除策略</strong>。与传统数据库的“精确过期删除”不同，Redis作为内存数据库，需要在“内存占用”和“性能损耗”之间寻找平衡，因此设计了一套混合式的过期删除机制。</p> <h2 id="一、先搞懂-redis为什么不搞-精确过期删除"><a href="#一、先搞懂-redis为什么不搞-精确过期删除" class="header-anchor">#</a> 一、先搞懂：Redis为什么不搞“精确过期删除”？</h2> <p>首先要明确一个核心前提：Redis的过期删除，<strong>不是简单的“到点就删”</strong>。如果采用“精确过期删除”（即给每个过期key绑定一个定时器，到时间立即删除），虽然能保证过期key及时清理，但会带来两个致命问题：</p> <ul><li><strong>性能损耗过大</strong>：如果Redis中存在大量过期key，每个key都需要一个定时器，会占用大量CPU资源，尤其是在高并发场景下，CPU会被频繁的删除操作占用，导致Redis响应延迟；</li> <li><strong>内存碎片风险</strong>：频繁的精确删除会产生大量内存碎片，降低内存利用率，长期运行可能导致内存溢出。</li></ul> <p>而Redis的核心优势是“高性能”和“高并发”，因此必须放弃“精确性”，选择“高效性”优先的设计思路。在此基础上，Redis设计了三种核心过期删除策略：<strong>惰性删除</strong>、<strong>定期删除</strong>、<strong>内存淘汰机制</strong>，三者协同工作，共同实现过期key的清理。</p> <h2 id="二、三大核心策略拆解-惰性删除-定期删除-内存淘汰"><a href="#二、三大核心策略拆解-惰性删除-定期删除-内存淘汰" class="header-anchor">#</a> 二、三大核心策略拆解：惰性删除+定期删除+内存淘汰</h2> <p>Redis的过期删除逻辑，是“被动清理”与“主动清理”结合的产物。下面逐一拆解三种策略的工作原理、优缺点，以及它们之间的协同逻辑。</p> <h3 id="_1-惰性删除-用的时候再检查-最省cpu的被动策略"><a href="#_1-惰性删除-用的时候再检查-最省cpu的被动策略" class="header-anchor">#</a> 1. 惰性删除：“用的时候再检查”，最省CPU的被动策略</h3> <h4 id="核心原理"><a href="#核心原理" class="header-anchor">#</a> 核心原理</h4> <p>惰性删除的逻辑非常简单：<strong>不主动删除任何过期key，只有当客户端访问某个key时，才检查该key是否过期</strong>。如果过期，则立即删除并返回“nil”；如果未过期，则正常返回key的值。</p> <p>形象地说，这就像“囤货党”——东西过期了不主动扔，只有当想起来要吃/用的时候，才看一眼是否过期，过期了再扔。</p> <h4 id="优缺点分析"><a href="#优缺点分析" class="header-anchor">#</a> 优缺点分析</h4> <table><thead><tr><th>优点</th> <th>缺点</th></tr></thead> <tbody><tr><td>CPU效率极高，无需主动消耗CPU资源扫描和删除过期key</td> <td>内存利用率低，大量过期key可能长期占用内存（“内存泄漏”风险）</td></tr> <tr><td>删除操作仅在“访问时”触发，不会出现集中删除导致的性能波动</td> <td>如果过期key长期不被访问，会一直占用内存，直到Redis内存不足</td></tr></tbody></table> <h4 id="适用场景"><a href="#适用场景" class="header-anchor">#</a> 适用场景</h4> <p>适合过期key访问频率较低、内存资源相对充足的场景。但仅靠惰性删除无法解决“内存泄漏”问题，因此必须配合其他策略使用。</p> <h3 id="_2-定期删除-每隔一段时间扫一批-平衡cpu和内存的主动策略"><a href="#_2-定期删除-每隔一段时间扫一批-平衡cpu和内存的主动策略" class="header-anchor">#</a> 2. 定期删除：“每隔一段时间扫一批”，平衡CPU和内存的主动策略</h3> <h4 id="核心原理-2"><a href="#核心原理-2" class="header-anchor">#</a> 核心原理</h4> <p>定期删除是Redis的“主动清理”策略：<strong>Redis会每隔一段时间（由配置参数决定），主动扫描一部分过期key并删除</strong>。但它并不是“全量扫描”，而是“抽样扫描”，具体逻辑如下：</p> <ol><li>从设置了过期时间的key的集合（expires字典）中，随机抽取N个key；</li> <li>检查这N个key是否过期，过期的则删除；</li> <li>如果本次扫描中，过期key的比例超过了M%，则继续重复步骤1-2；否则，本次扫描结束。</li></ol> <p>这里的N和M都是可配置的参数（默认N=20，M=25），通过这种“抽样+循环”的方式，既保证了一定的清理效率，又避免了全量扫描带来的CPU压力。</p> <p>形象地说，这就像“定期大扫除”——不是每天把所有角落都扫一遍，而是每隔一段时间，随机挑几个角落扫，要是发现脏的地方多，就多扫一会儿；要是比较干净，就先停。</p> <h4 id="关键配置参数"><a href="#关键配置参数" class="header-anchor">#</a> 关键配置参数</h4> <p>定期删除的核心逻辑由以下两个配置参数控制（可在redis.conf中修改）：</p> <ul><li><code>hz 10</code>：Redis的“心跳频率”，即每秒执行定期任务的次数（默认10次）。hz值越高，定期删除的频率越高，过期key清理越及时，但CPU占用也越高；</li> <li><code>maxmemory-samples 5</code>：内存淘汰时的抽样数量（与定期删除的抽样逻辑类似），默认5个。</li></ul> <h4 id="优缺点分析-2"><a href="#优缺点分析-2" class="header-anchor">#</a> 优缺点分析</h4> <table><thead><tr><th>优点</th> <th>缺点</th></tr></thead> <tbody><tr><td>平衡了CPU和内存：既主动清理了部分过期key，减少内存占用，又通过抽样避免了全量扫描的CPU损耗</td> <td>存在“漏删”风险：抽样扫描无法覆盖所有过期key，部分过期key可能依然长期存在</td></tr> <tr><td>可通过配置hz参数调整清理频率，适配不同业务场景</td> <td>如果hz设置过高，会占用过多CPU资源；设置过低，过期key清理不及时</td></tr></tbody></table> <h3 id="_3-内存淘汰机制-内存满了再清理-最后的兜底策略"><a href="#_3-内存淘汰机制-内存满了再清理-最后的兜底策略" class="header-anchor">#</a> 3. 内存淘汰机制：“内存满了再清理”，最后的兜底策略</h3> <p>即使有了惰性删除和定期删除，依然可能存在大量过期key未被清理的情况。当Redis的内存使用达到上限（由<code>maxmemory</code>参数设置）时，就需要通过“内存淘汰机制”强制清理部分key，腾出内存空间，保证Redis正常运行。</p> <h4 id="核心原理-3"><a href="#核心原理-3" class="header-anchor">#</a> 核心原理</h4> <p>内存淘汰机制的触发条件是：<strong>Redis使用的内存达到maxmemory阈值，且新的写操作请求进来时</strong>。此时Redis会根据预设的淘汰策略，从内存中选择一部分key删除，然后执行新的写操作。</p> <p>注意：内存淘汰机制不仅会删除过期key，在过期key不足时，也会删除未过期的key——这是它与前两种策略的核心区别（前两种仅删除过期key）。</p> <h4 id="_7种核心淘汰策略-redis-6-2"><a href="#_7种核心淘汰策略-redis-6-2" class="header-anchor">#</a> 7种核心淘汰策略（Redis 6.2+）</h4> <p>Redis支持多种内存淘汰策略，可通过<code>maxmemory-policy</code>参数配置，不同策略适配不同的业务场景：</p> <table><thead><tr><th>策略名称</th> <th>核心逻辑</th> <th>适用场景</th></tr></thead> <tbody><tr><td>noeviction（默认）</td> <td>不淘汰任何key，内存满时拒绝所有写操作（返回OOM错误）</td> <td>不允许数据丢失的场景（如金融交易数据），需手动监控内存</td></tr> <tr><td>allkeys-lru</td> <td>从所有key中，淘汰“最近最少使用”（LRU）的key</td> <td>通用场景，适合大多数业务（如缓存热点数据）</td></tr> <tr><td>volatile-lru</td> <td>仅从设置了过期时间的key中，淘汰“最近最少使用”的key</td> <td>需要保留未过期key（如核心配置数据），仅清理过期缓存的场景</td></tr> <tr><td>allkeys-random</td> <td>从所有key中，随机淘汰一部分key</td> <td>key的访问频率均匀，无明显热点的场景（如随机生成的临时key）</td></tr> <tr><td>volatile-random</td> <td>仅从设置了过期时间的key中，随机淘汰一部分key</td> <td>临时缓存场景，且无需区分访问频率</td></tr> <tr><td>volatile-ttl</td> <td>仅从设置了过期时间的key中，淘汰“剩余过期时间最短”（TTL最小）的key</td> <td>需要优先清理即将过期的缓存数据的场景</td></tr> <tr><td>volatile-lfu</td> <td>仅从设置了过期时间的key中，淘汰“最近最少频率使用”（LFU）的key</td> <td>缓存场景中，需要区分访问频率（如低频访问的缓存优先清理）</td></tr> <tr><td>allkeys-lfu</td> <td>从所有key中，淘汰“最近最少频率使用”（LFU）的key</td> <td>通用场景，比LRU更精准（避免偶发访问导致的热点key被淘汰）</td></tr></tbody></table> <h4 id="优缺点分析-3"><a href="#优缺点分析-3" class="header-anchor">#</a> 优缺点分析</h4> <table><thead><tr><th>优点</th> <th>缺点</th></tr></thead> <tbody><tr><td>内存安全的最后保障：即使前两种策略失效，也能通过淘汰key保证Redis正常运行</td> <td>可能删除未过期的核心key（如配置不当），导致业务异常</td></tr> <tr><td>策略多样，可根据业务需求灵活选择</td> <td>淘汰操作会占用CPU资源，可能导致写操作延迟</td></tr></tbody></table> <h2 id="三、协同工作流程-redis是如何组合三种策略的"><a href="#三、协同工作流程-redis是如何组合三种策略的" class="header-anchor">#</a> 三、协同工作流程：Redis是如何组合三种策略的？</h2> <p>单独看每种策略都有缺陷，但组合起来后，就能实现“CPU高效+内存可控”的平衡。Redis的过期key清理完整流程如下：</p> <ol><li><strong>日常清理</strong>：定期删除策略每隔hz秒执行一次抽样扫描，主动清理一部分过期key，减少内存占用；</li> <li><strong>访问触发清理</strong>：客户端访问某个key时，惰性删除策略触发，检查该key是否过期，过期则立即删除；</li> <li><strong>内存兜底清理</strong>：当Redis内存达到maxmemory阈值时，新写操作触发内存淘汰机制，根据预设策略淘汰key（优先淘汰过期key，不足时淘汰未过期key），腾出内存空间。</li></ol> <p>举个例子：一个设置了24小时过期的缓存key，可能在3种情况下被删除：</p> <ul><li>24小时后，被定期删除的抽样扫描命中并删除；</li> <li>24小时后，客户端访问该key，被惰性删除检查并删除；</li> <li>24小时内，Redis内存满了，该key被内存淘汰机制选中并删除。</li></ul> <h2 id="四、实战配置优化-不同业务场景的最优方案"><a href="#四、实战配置优化-不同业务场景的最优方案" class="header-anchor">#</a> 四、实战配置优化：不同业务场景的最优方案</h2> <p>了解了三种策略的逻辑后，核心是根据业务场景配置合适的参数，避免出现“内存泄漏”或“性能波动”问题。下面给出不同场景的配置建议：</p> <h3 id="_1-通用缓存场景-如电商商品缓存、接口缓存"><a href="#_1-通用缓存场景-如电商商品缓存、接口缓存" class="header-anchor">#</a> 1. 通用缓存场景（如电商商品缓存、接口缓存）</h3> <p>核心需求：兼顾性能和内存利用率，优先保留热点数据，避免核心缓存被淘汰。</p> <p>推荐配置：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>
<span class="token comment"># 设置内存上限（根据服务器内存配置，如8GB服务器设置为6GB）</span>
maxmemory 6gb
<span class="token comment"># 淘汰策略：从所有key中淘汰最近最少使用的key（精准保留热点）</span>
maxmemory-policy allkeys-lfu
<span class="token comment"># 提高定期删除频率（每秒15次，平衡CPU和清理效率）</span>
hz 15
<span class="token comment"># 内存淘汰抽样数量（增加抽样数，提升淘汰精准度）</span>
maxmemory-samples 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-核心数据缓存场景-如用户登录状态、订单信息"><a href="#_2-核心数据缓存场景-如用户登录状态、订单信息" class="header-anchor">#</a> 2. 核心数据缓存场景（如用户登录状态、订单信息）</h3> <p>核心需求：不允许核心未过期数据被淘汰，仅清理过期缓存。</p> <p>推荐配置：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>
maxmemory 4gb
<span class="token comment"># 仅淘汰设置了过期时间的key中，最近最少使用的（保护未过期核心数据）</span>
maxmemory-policy volatile-lfu
<span class="token comment"># 适当提高定期删除频率，及时清理过期缓存</span>
hz 20
maxmemory-samples 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_3-临时数据场景-如验证码、临时会话"><a href="#_3-临时数据场景-如验证码、临时会话" class="header-anchor">#</a> 3. 临时数据场景（如验证码、临时会话）</h3> <p>核心需求：临时数据过期后及时清理，内存满时可随机淘汰。</p> <p>推荐配置：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>
maxmemory 2gb
<span class="token comment"># 仅从过期key中随机淘汰（临时数据无需区分访问频率）</span>
maxmemory-policy volatile-random
<span class="token comment"># 定期删除频率适中</span>
hz 10
maxmemory-samples 5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_4-不允许数据丢失场景-如金融交易记录缓存"><a href="#_4-不允许数据丢失场景-如金融交易记录缓存" class="header-anchor">#</a> 4. 不允许数据丢失场景（如金融交易记录缓存）</h3> <p>核心需求：禁止淘汰未过期数据，内存满时拒绝写操作，手动处理。</p> <p>推荐配置：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>
maxmemory 8gb
<span class="token comment"># 不淘汰任何key，内存满时拒绝写操作</span>
maxmemory-policy noeviction
<span class="token comment"># 提高定期删除频率，尽量及时清理过期key</span>
hz 25
maxmemory-samples 10
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="五、常见坑点与避坑指南"><a href="#五、常见坑点与避坑指南" class="header-anchor">#</a> 五、常见坑点与避坑指南</h2> <p>在实际使用中，很多问题都是由于对过期删除策略理解不深导致的。下面总结4个常见坑点及避坑方法：</p> <h3 id="坑1-设置了expire-但key依然长期存在"><a href="#坑1-设置了expire-但key依然长期存在" class="header-anchor">#</a> 坑1：设置了expire，但key依然长期存在</h3> <p>原因：该key长期未被访问（惰性删除未触发），且未被定期删除的抽样扫描命中。</p> <p>避坑方法：</p> <ul><li>适当提高hz参数（如从10改为15），增加定期删除频率；</li> <li>对重要的过期key，可通过定时任务主动扫描并删除（如使用Redis的scan命令遍历过期key）；</li> <li>避免设置过长的过期时间，尽量按业务需求精准设置TTL。</li></ul> <h3 id="坑2-redis突然响应变慢-cpu占用飙升"><a href="#坑2-redis突然响应变慢-cpu占用飙升" class="header-anchor">#</a> 坑2：Redis突然响应变慢，CPU占用飙升</h3> <p>原因：hz参数设置过高（如50），导致定期删除任务占用过多CPU；或内存满后，大量淘汰操作触发CPU密集型计算。</p> <p>避坑方法：</p> <ul><li>hz参数不宜超过25（默认10），需根据CPU性能调整；</li> <li>提前监控Redis内存使用，避免内存达到maxmemory阈值（可设置告警）；</li> <li>选择合适的淘汰策略（如LFU比LRU更精准，减少频繁淘汰）。</li></ul> <h3 id="坑3-核心未过期key被淘汰-导致业务异常"><a href="#坑3-核心未过期key被淘汰-导致业务异常" class="header-anchor">#</a> 坑3：核心未过期key被淘汰，导致业务异常</h3> <p>原因：使用了allkeys-*系列淘汰策略，且内存满时，核心key被判定为“低频使用”或“随机选中”。</p> <p>避坑方法：</p> <ul><li>核心数据key不设置过期时间，使用volatile-*系列淘汰策略（仅淘汰过期key）；</li> <li>适当增大maxmemory阈值，避免频繁触发淘汰机制；</li> <li>对核心key，可通过“定期访问”的方式维持其“热点”状态（如定时执行get操作）。</li></ul> <h3 id="坑4-认为-expire设置后-key一定会在到期时删除"><a href="#坑4-认为-expire设置后-key一定会在到期时删除" class="header-anchor">#</a> 坑4：认为“expire设置后，key一定会在到期时删除”</h3> <p>原因：对Redis过期删除的“非精确性”认知不足，误将Redis的expire当作“精确过期”。</p> <p>避坑方法：</p> <ul><li>明确Redis过期删除是“最终一致性”，而非“强一致性”；</li> <li>如果业务需要“精确过期”（如定时任务触发），建议使用专门的定时任务组件（如Quartz、XXL-Job），而非依赖Redis的expire；</li> <li>对过期时间敏感的业务，可在应用层增加“二次检查”（如获取key后，检查是否过期，过期则重新生成）。</li></ul> <h2 id="六、总结-redis过期删除的核心逻辑"><a href="#六、总结-redis过期删除的核心逻辑" class="header-anchor">#</a> 六、总结：Redis过期删除的核心逻辑</h2> <p>Redis的过期删除策略，本质是“在性能和内存之间寻找平衡”的设计艺术。三种策略的核心价值可总结为：</p> <ul><li>惰性删除：保证CPU高效，避免主动消耗；</li> <li>定期删除：主动清理部分过期key，减少内存泄漏风险；</li> <li>内存淘汰：内存安全的最后兜底，保证Redis不崩溃。</li></ul></div></div>  <div class="page-edit"><div class="edit-link"><a href="https://github.com/tavio-zhang/blog/edit/master/docs/《Redis》笔记/9.Redis过期删除策略.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Redis%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5" title="标签">#Redis过期删除策略</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2026/01/21, 19:29:14</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/aeefc4/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Redis IO多路复用</div></a> <a href="/pages/390684/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Redis Bitmap</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/aeefc4/" class="prev">Redis IO多路复用</a></span> <span class="next"><a href="/pages/390684/">Redis Bitmap</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/942d4b/"><div>
            订单超时取消
            <!----></div></a> <span class="date">01-21</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/87b303/"><div>
            双 Token 登录
            <!----></div></a> <span class="date">01-21</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/a3f3fd/"><div>
            长短链接跳转
            <!----></div></a> <span class="date">01-21</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:taviozhang@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/tavio-zhang" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div></div></div>
    <script src="/assets/js/app.c6ba13aa.js" defer></script><script src="/assets/js/2.8d9f533d.js" defer></script><script src="/assets/js/76.668519a5.js" defer></script>
  </body>
</html>
