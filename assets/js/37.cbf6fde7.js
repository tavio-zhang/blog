(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{392:function(s,n,a){"use strict";a.r(n);var e=a(8),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("在大数据时代，如何高效存储、快速检索海量数据成为关键挑战。Elasticsearch（简称ES）凭借其分布式特性，成为解决这一问题的主流方案。")]),s._v(" "),n("h2",{attrs:{id:"一、为什么需要分布式架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、为什么需要分布式架构"}},[s._v("#")]),s._v(" 一、为什么需要分布式架构？")]),s._v(" "),n("p",[s._v("ES作为开源的分布式搜索引擎，其设计初衷就是为了解决单机模式的三大瓶颈：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("存储瓶颈")]),s._v("：单机磁盘容量有限，无法承载TB级甚至PB级数据；")]),s._v(" "),n("li",[n("strong",[s._v("性能瓶颈")]),s._v("：单节点处理能力有限，高并发查询时响应延迟剧增；")]),s._v(" "),n("li",[n("strong",[s._v("可用性瓶颈")]),s._v("：单机故障会导致服务中断，数据存在丢失风险。")])]),s._v(" "),n("p",[s._v('分布式架构通过"分而治之"的思想，将数据分散到多个节点，同时通过冗余备份保障高可用，完美解决了上述问题。')]),s._v(" "),n("h2",{attrs:{id:"二、es分布式架构的四大核心概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、es分布式架构的四大核心概念"}},[s._v("#")]),s._v(" 二、ES分布式架构的四大核心概念")]),s._v(" "),n("p",[s._v("ES的分布式能力基于四个核心概念构建，它们相互关联、层层支撑，共同构成了分布式体系的基石。")]),s._v(" "),n("h3",{attrs:{id:"_2-1-节点-es集群的物理服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-节点-es集群的物理服务器"}},[s._v("#")]),s._v(" 2.1 节点：ES集群的物理服务器")]),s._v(" "),n("p",[s._v("节点是ES集群的最小硬件单元，本质是一台运行了ES软件的服务器。所有的数据存储、查询计算都在节点上完成，多个节点组成了ES集群。")]),s._v(" "),n("p",[s._v("如果把ES看作一个图书馆，每个楼层就是一个节点，不同楼层之间有通信机制。同时节点间会按功能分工，避免单一节点压力过大宕机。")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("节点类型")]),s._v(" "),n("th",[s._v("核心职责")]),s._v(" "),n("th",[s._v("配置方式（elasticsearch.yml）")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("主节点（Master）")]),s._v(" "),n("td",[s._v("管理集群元数据（如索引创建、分片分配）、维护集群状态（节点加入/离开）")]),s._v(" "),n("td",[n("code",[s._v("node.master: true")]),s._v("（默认true）")])]),s._v(" "),n("tr",[n("td",[s._v("数据节点（Data）")]),s._v(" "),n("td",[s._v("存储分片、处理读写请求、执行数据聚合计算")]),s._v(" "),n("td",[n("code",[s._v("node.data: true")]),s._v("（默认true）")])]),s._v(" "),n("tr",[n("td",[s._v("协调节点（Coordinating）")]),s._v(" "),n("td",[s._v("接收请求、分发任务、汇总结果")]),s._v(" "),n("td",[s._v("默认为所有节点（仅当"),n("code",[s._v("node.master: false")]),s._v("且"),n("code",[s._v("node.data: false")]),s._v("时为专用协调节点）")])]),s._v(" "),n("tr",[n("td",[s._v("预处理节点（Ingest）")]),s._v(" "),n("td",[s._v("数据写入前进行预处理（如字段转换、过滤）")]),s._v(" "),n("td",[n("code",[s._v("node.ingest: true")]),s._v("（默认true）")])])])]),s._v(" "),n("blockquote",[n("p",[s._v("注意：一个节点可同时承担多种角色（如默认节点既是主节点候选者，也是数据节点和协调节点），但生产环境建议分离角色以避免资源竞争。")])]),s._v(" "),n("h3",{attrs:{id:"_2-2-索引-数据的逻辑集合"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-索引-数据的逻辑集合"}},[s._v("#")]),s._v(" 2.2 索引：数据的逻辑集合")]),s._v(" "),n("p",[s._v("索引是同类文档的"),n("strong",[s._v("逻辑容器")]),s._v('，类似关系型数据库中的"数据库"概念，但包含更丰富的含义：')]),s._v(" "),n("ul",[n("li",[s._v("定义数据结构规则（映射，Mapping）；")]),s._v(" "),n("li",[s._v("管理分片与副本的分配策略；")]),s._v(" "),n("li",[s._v("作为客户端操作的入口（如查询、写入均通过索引名指定）。")])]),s._v(" "),n("h4",{attrs:{id:"索引的关键特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#索引的关键特性"}},[s._v("#")]),s._v(" 索引的关键特性")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("命名规范")]),s._v("：必须小写，不能包含空格、斜杠等特殊字符（推荐使用"),n("code",[s._v("product-logs")]),s._v("这类下划线/短横线分隔的命名）；")]),s._v(" "),n("li",[n("strong",[s._v("映射（Mapping）")]),s._v('：定义文档字段的类型（如文本、数字、日期）、分词器等规则，类似数据库的"表结构"；')]),s._v(" "),n("li",[n("strong",[s._v("生命周期")]),s._v("：可通过ILM（索引生命周期管理）自动执行滚动、归档、删除等操作，适用于时序数据（如日志）。")])]),s._v(" "),n("h3",{attrs:{id:"_2-3-分片-数据的水平拆分单元"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-分片-数据的水平拆分单元"}},[s._v("#")]),s._v(" 2.3 分片：数据的水平拆分单元")]),s._v(" "),n("p",[s._v("当索引数据量过大时，单节点无法承载，此时需要通过"),n("strong",[s._v("分片")]),s._v("将索引拆分为多个独立的子单元。每个分片是一个完整的Lucene实例（ES底层搜索引擎），可独立处理读写请求。")]),s._v(" "),n("h4",{attrs:{id:"分片的核心作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分片的核心作用"}},[s._v("#")]),s._v(" 分片的核心作用")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("突破存储限制")]),s._v("：将1亿条数据拆分为5个分片，每个分片仅需存储2000万条；")]),s._v(" "),n("li",[n("strong",[s._v("并行计算加速")]),s._v("：查询时多个分片同时处理，结果汇总后返回，效率随分片数线性提升（在合理范围内）。")])]),s._v(" "),n("h4",{attrs:{id:"分片的类型与特性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#分片的类型与特性"}},[s._v("#")]),s._v(" 分片的类型与特性")]),s._v(" "),n("table",[n("thead",[n("tr",[n("th",[s._v("分片类型")]),s._v(" "),n("th",[s._v("核心特性")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("主分片（Primary Shard）")]),s._v(" "),n("td",[s._v("数据写入的原始分片，创建索引时指定数量（默认5个），"),n("strong",[s._v("创建后不可修改")]),s._v("（修改需重建索引）")])]),s._v(" "),n("tr",[n("td",[s._v("副分片（Replica Shard）")]),s._v(" "),n("td",[s._v("主分片的冗余副本，可动态调整数量（默认1个），不参与数据写入但可处理读请求")])])])]),s._v(" "),n("blockquote",[n("p",[s._v("为什么主分片数量不可修改？"),n("br"),s._v("\n文档存储的分片由哈希算法决定："),n("code",[s._v("shard = hash(document_id) % 主分片数")]),s._v("。若修改主分片数，哈希结果会变化，导致所有文档的存储位置失效。")])]),s._v(" "),n("h3",{attrs:{id:"_2-4-副本-高可用与性能优化的保障"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-副本-高可用与性能优化的保障"}},[s._v("#")]),s._v(" 2.4 副本：高可用与性能优化的保障")]),s._v(" "),n("p",[s._v("副本是主分片的"),n("strong",[s._v("冗余拷贝")]),s._v("，其核心价值体现在两方面：")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("高可用")]),s._v("：当主分片所在节点故障时，副本会被自动升级为主分片，避免数据丢失；")]),s._v(" "),n("li",[n("strong",[s._v("性能优化")]),s._v("：副本可分担读请求压力（如查询、聚合），提高集群读吞吐量。")])]),s._v(" "),n("h4",{attrs:{id:"副本的分配规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#副本的分配规则"}},[s._v("#")]),s._v(" 副本的分配规则")]),s._v(" "),n("ul",[n("li",[s._v("主分片与副本分片"),n("strong",[s._v("不会存储在同一节点")]),s._v("（避免单点故障）；")]),s._v(" "),n("li",[s._v("多个副本会均匀分布在不同节点（如2个副本会分配到2个不同节点）。")])]),s._v(" "),n("h2",{attrs:{id:"三、核心概念的关联关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、核心概念的关联关系"}},[s._v("#")]),s._v(" 三、核心概念的关联关系")]),s._v(" "),n("p",[s._v("四个概念的层级关系可概括为："),n("strong",[s._v("集群由节点组成，索引由分片组成，分片有副本保障高可用")]),s._v("。")]),s._v(" "),n("p",[s._v('用"图书馆"模型类比：')]),s._v(" "),n("ul",[n("li",[s._v("集群 = 整个图书馆；")]),s._v(" "),n("li",[s._v("节点 = 图书馆的楼层（每个楼层有独立的存储空间和工作人员）；")]),s._v(" "),n("li",[s._v('索引 = 某类书籍的专区（如"计算机科学区"）；')]),s._v(" "),n("li",[s._v("主分片 = 专区内的书架（原始书籍存放处）；")]),s._v(" "),n("li",[s._v("副本 = 书架的备份（复本书籍，放在其他楼层，供读者查阅或应急）；")]),s._v(" "),n("li",[s._v("协调节点 = 图书馆前台（接收读者请求，协调各楼层找书，汇总结果）。")])]),s._v(" "),n("img",{attrs:{src:"/img/es-cluster-example.png"}}),s._v(" "),n("img",{attrs:{src:"/img/es-cluster-demo.png"}}),s._v("\n*图：ES集群中节点、索引、分片、副本的分布关系（主分片与副本分散在不同节点，保障高可用）*\n"),n("p",[n("strong",[s._v("记住 4 个核心结论")])]),s._v(" "),n("blockquote",[n("p",[s._v("节点是 “硬件载体”：运行 ES 的服务器，是所有数据和计算的基础；"),n("br"),s._v("\n索引是 “逻辑集合”：管理同类数据，定义数据规则，是客户端操作的入口；"),n("br"),s._v("\n分片是 “水平拆分”：解决单节点存储和查询瓶颈，数量创建后不可改；"),n("br"),s._v("\n副本是 “冗余备份”：保障高可用，数量可动态调整。")])]),s._v(" "),n("h2",{attrs:{id:"四、docker-compose-搭建本地es集群实战"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、docker-compose-搭建本地es集群实战"}},[s._v("#")]),s._v(" 四、Docker Compose 搭建本地ES集群实战")]),s._v(" "),n("p",[s._v("下面通过Docker Compose快速搭建一个包含3个节点的ES集群，并集成Kibana可视化工具。")]),s._v(" "),n("h3",{attrs:{id:"_4-1-集群架构设计"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-集群架构设计"}},[s._v("#")]),s._v(" 4.1 集群架构设计")]),s._v(" "),n("ul",[n("li",[s._v("3个节点（es-node1、es-node2、es-node3），均作为主节点候选者和数据节点；")]),s._v(" "),n("li",[s._v("每个节点分配512M堆内存（开发环境配置，生产环境需调大）；")]),s._v(" "),n("li",[s._v("Kibana用于集群监控与操作界面。")])]),s._v(" "),n("h3",{attrs:{id:"_4-2-配置文件-docker-compose-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-配置文件-docker-compose-yml"}},[s._v("#")]),s._v(" 4.2 配置文件（docker-compose.yml）")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('version: \'3.8\'  # 明确Compose版本\n\nservices:\n  # 节点1：主节点候选者+数据节点\n  es-node1:\n    image: elasticsearch:7.17.10  # 使用官方镜像，版本需统一\n    container_name: es-node1\n    environment:\n      - node.name=es-node1  # 节点唯一名称\n      - cluster.name=es-learning-cluster  # 集群名称（所有节点必须一致）\n      - discovery.seed_hosts=es-node2,es-node3  # 集群发现列表（其他节点的主机名）\n      - cluster.initial_master_nodes=es-node1,es-node2,es-node3  # 初始主节点候选列表（避免脑裂）\n      - bootstrap.memory_lock=true  # 锁定内存，防止ES内存被系统swap至磁盘（影响性能）\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"  # 堆内存大小（生产环境建议设为物理内存的50%，不超过32G）\n      - xpack.security.enabled=false  # 关闭安全认证（开发环境简化配置）\n      - xpack.monitoring.collection.enabled=true  # 开启监控数据收集（供Kibana展示）\n    ulimits:\n      memlock:\n        soft: -1  # 无限制\n        hard: -1\n    volumes:\n      - es-data1:/usr/share/elasticsearch/data  # 数据持久化卷（避免容器重启数据丢失）\n    ports:\n      - "9200:9200"  # HTTP端口（供客户端访问）\n      - "9300:9300"  # TCP端口（集群内部通信）\n    networks:\n      - es-network  # 集群专用网络（隔离其他服务）\n\n  # 节点2：配置与节点1一致，仅名称和端口不同\n  es-node2:\n    image: elasticsearch:7.17.10\n    container_name: es-node2\n    environment:\n      - node.name=es-node2\n      - cluster.name=es-learning-cluster\n      - discovery.seed_hosts=es-node1,es-node3\n      - cluster.initial_master_nodes=es-node1,es-node2,es-node3\n      - bootstrap.memory_lock=true\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"\n      - xpack.security.enabled=false\n      - xpack.monitoring.collection.enabled=true\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - es-data2:/usr/share/elasticsearch/data\n    ports:\n      - "9201:9200"\n      - "9301:9300"\n    networks:\n      - es-network\n\n  # 节点3：配置与节点1一致，仅名称和端口不同\n  es-node3:\n    image: elasticsearch:7.17.10\n    container_name: es-node3\n    environment:\n      - node.name=es-node3\n      - cluster.name=es-learning-cluster\n      - discovery.seed_hosts=es-node1,es-node2\n      - cluster.initial_master_nodes=es-node1,es-node2,es-node3\n      - bootstrap.memory_lock=true\n      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"\n      - xpack.security.enabled=false\n      - xpack.monitoring.collection.enabled=true\n    ulimits:\n      memlock:\n        soft: -1\n        hard: -1\n    volumes:\n      - es-data3:/usr/share/elasticsearch/data\n    ports:\n      - "9202:9200"\n      - "9302:9300"\n    networks:\n      - es-network\n\n  # Kibana：ES可视化工具\n  kibana:\n    image: kibana:7.17.10  # 版本必须与ES一致\n    container_name: kibana\n    environment:\n      - ELASTICSEARCH_HOSTS=["http://es-node1:9200","http://es-node2:9200","http://es-node3:9200"]  # 连接所有ES节点\n      - KIBANA_DEFAULTAPPID=home  # 默认启动页\n      - I18N_LOCALE=zh-CN  # 中文显示\n    ports:\n      - "5601:5601"  # Kibana Web端口\n    depends_on:\n      - es-node1\n      - es-node2\n      - es-node3  # 确保ES启动后再启动Kibana\n    networks:\n      - es-network\n\n# 定义持久化卷（数据不会随容器删除而丢失）\nvolumes:\n  es-data1:\n  es-data2:\n  es-data3:\n\n# 定义集群网络\nnetworks:\n  es-network:\n    driver: bridge  # 桥接模式（适合本地开发）\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br")])]),n("h3",{attrs:{id:"_4-3-启动与验证集群"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-启动与验证集群"}},[s._v("#")]),s._v(" 4.3 启动与验证集群")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("启动集群")]),s._v("：在配置文件目录执行以下命令")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker-compose up -d  # -d表示后台运行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[n("strong",[s._v("验证集群状态")]),s._v("：通过ES API查看集群健康度")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('curl http://localhost:9200/_cluster/health\n\n//成功返回应为：\n{\n  "cluster_name": "es-learning-cluster",\n  "status": "green",  # green表示所有主分片和副本均正常\n  "timed_out": false,\n  "number_of_nodes": 3,  # 3个节点正常运行\n  "number_of_data_nodes": 3,\n  "active_primary_shards": 0,  # 暂无索引，所以分片数为0\n  "active_shards": 0,\n  "relocating_shards": 0,\n  "initializing_shards": 0,\n  "unassigned_shards": 0,\n  "delayed_unassigned_shards": 0,\n  "number_of_pending_tasks": 0,\n  "number_of_in_flight_fetch": 0,\n  "task_max_waiting_in_queue_millis": 0,\n  "active_shards_percent_as_number": 100.0\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[n("strong",[s._v("访问Kibana")]),s._v("：打开浏览器访问 "),n("code",[s._v("http://localhost:5601")]),s._v("，进入Kibana界面即可可视化管理集群。")])]),s._v(" "),n("h2",{attrs:{id:"五、核心结论与最佳实践"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、核心结论与最佳实践"}},[s._v("#")]),s._v(" 五、核心结论与最佳实践")]),s._v(" "),n("ol",[n("li",[n("strong",[s._v("节点规划")]),s._v("：生产环境建议分离角色（如1-3个专用主节点，多个数据节点，专用协调节点）；")]),s._v(" "),n("li",[n("strong",[s._v("分片策略")]),s._v("：主分片数量根据数据量预估（每个分片建议10-50GB），副本数根据高可用需求设置（至少1个）；")]),s._v(" "),n("li",[n("strong",[s._v("性能优化")]),s._v("：副本可提升读性能，但会增加存储开销和写入延迟（需平衡读写需求）；")]),s._v(" "),n("li",[n("strong",[s._v("扩展性")]),s._v("：通过新增节点可自动扩展集群容量，ES会自动重新分配分片。")])])])}),[],!1,null,null,null);n.default=t.exports}}]);