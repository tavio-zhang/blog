(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{415:function(o,_,a){"use strict";a.r(_);var e=a(8),t=Object(e.a)({},(function(){var o=this,_=o._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":o.$parent.slotKey}},[_("h1",{attrs:{id:"æ·±åº¦è§£æinnodbå´©æºƒæ¢å¤-redo-logä¸undo-logçš„ååŒæœºåˆ¶"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ·±åº¦è§£æinnodbå´©æºƒæ¢å¤-redo-logä¸undo-logçš„ååŒæœºåˆ¶"}},[o._v("#")]),o._v(" æ·±åº¦è§£æInnoDBå´©æºƒæ¢å¤ï¼šRedo Logä¸Undo Logçš„ååŒæœºåˆ¶")]),o._v(" "),_("p",[o._v("åœ¨æ•°æ®åº“è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œå´©æºƒï¼ˆå¦‚æœåŠ¡å™¨æ–­ç”µã€MySQLè¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ï¼‰æ˜¯æ— æ³•å®Œå…¨é¿å…çš„ã€‚å¯¹äºæ”¯æŒäº‹åŠ¡çš„InnoDBå­˜å‚¨å¼•æ“è€Œè¨€ï¼Œå´©æºƒæ¢å¤æ˜¯ä¿éšœæ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒèƒ½åŠ›â€”â€”å®ƒéœ€è¦ç¡®ä¿â€œå·²æäº¤çš„äº‹åŠ¡æ•°æ®ä¸ä¸¢å¤±ï¼ˆæŒä¹…æ€§ï¼‰â€å’Œâ€œæœªæäº¤çš„äº‹åŠ¡æ•°æ®ä¸æ®‹ç•™ï¼ˆåŸå­æ€§ï¼‰â€ã€‚è€Œè¿™ä¸€åˆ‡çš„å®ç°ï¼Œéƒ½ä¾èµ–äºInnoDBçš„ä¸¤å¤§æ ¸å¿ƒæ—¥å¿—ï¼šRedo Logï¼ˆé‡åšæ—¥å¿—ï¼‰ä¸Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰ã€‚")]),o._v(" "),_("h2",{attrs:{id:"ä¸€ã€å´©æºƒæ¢å¤çš„æ ¸å¿ƒç›®æ ‡-åšå®ˆacidä¸­çš„aä¸d"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€å´©æºƒæ¢å¤çš„æ ¸å¿ƒç›®æ ‡-åšå®ˆacidä¸­çš„aä¸d"}},[o._v("#")]),o._v(" ä¸€ã€å´©æºƒæ¢å¤çš„æ ¸å¿ƒç›®æ ‡ï¼šåšå®ˆACIDä¸­çš„Aä¸D")]),o._v(" "),_("p",[o._v("InnoDBä½œä¸ºäº‹åŠ¡å‹å­˜å‚¨å¼•æ“ï¼Œæ ¸å¿ƒæ˜¯ä¿éšœäº‹åŠ¡çš„ACIDç‰¹æ€§ã€‚å…¶ä¸­ï¼Œå´©æºƒæ¢å¤æœºåˆ¶ä¸»è¦é’ˆå¯¹"),_("strong",[o._v("åŸå­æ€§ï¼ˆAtomicityï¼‰")]),o._v(" å’Œ"),_("strong",[o._v("æŒä¹…æ€§ï¼ˆDurabilityï¼‰")]),o._v("ï¼š")]),o._v(" "),_("ul",[_("li",[_("strong",[o._v("åŸå­æ€§ä¿éšœ")]),o._v("ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°å•ä½ï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚è‹¥äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­æ•°æ®åº“å´©æºƒï¼Œæœªæäº¤çš„äº‹åŠ¡å¿…é¡»è¢«â€œå›æ»šâ€ï¼Œä¸èƒ½æ®‹ç•™ä»»ä½•æ•°æ®å˜æ›´ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("æŒä¹…æ€§ä¿éšœ")]),o._v("ï¼šäº‹åŠ¡æäº¤åï¼Œå…¶ä¿®æ”¹çš„æ•°æ®å¿…é¡»æ°¸ä¹…ä¿å­˜åˆ°ç£ç›˜ï¼Œå³ä½¿åç»­æ•°æ®åº“å´©æºƒï¼Œå·²æäº¤çš„æ•°æ®ä¹Ÿä¸èƒ½ä¸¢å¤±ã€‚")])]),o._v(" "),_("p",[o._v("è¿™é‡Œå­˜åœ¨ä¸€ä¸ªæ ¸å¿ƒçŸ›ç›¾ï¼šè‹¥ä¸ºäº†æŒä¹…æ€§ï¼Œæ¯æ¬¡äº‹åŠ¡æäº¤éƒ½å°†æ•°æ®ç›´æ¥åˆ·å†™åˆ°ç£ç›˜ï¼Œä¼šå› ç£ç›˜IOé€Ÿåº¦æ…¢å¯¼è‡´æ€§èƒ½æå·®ï¼›è‹¥ä¸ºäº†æ€§èƒ½ï¼Œå…ˆå°†æ•°æ®ç¼“å­˜åœ¨å†…å­˜ï¼ˆBuffer Poolï¼‰ï¼Œåˆä¼šé¢ä¸´å´©æºƒæ—¶å†…å­˜æ•°æ®ä¸¢å¤±çš„é£é™©ã€‚Redo Logä¸Undo Logçš„ååŒè®¾è®¡ï¼Œæ­£æ˜¯ä¸ºäº†åœ¨â€œé«˜æ€§èƒ½â€ä¸â€œæ•°æ®ä¸€è‡´æ€§â€ä¹‹é—´æ‰¾åˆ°å¹³è¡¡â€”â€”Redo Logä¿éšœæŒä¹…æ€§ï¼ŒUndo Logä¿éšœåŸå­æ€§ï¼Œä¸¤è€…é…åˆå®Œæˆå´©æºƒåçš„ç²¾å‡†æ¢å¤ã€‚")]),o._v(" "),_("h2",{attrs:{id:"äºŒã€redo-log-ä¿éšœæŒä¹…æ€§çš„-é‡åšæ—¥å¿—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€redo-log-ä¿éšœæŒä¹…æ€§çš„-é‡åšæ—¥å¿—"}},[o._v("#")]),o._v(" äºŒã€Redo Logï¼šä¿éšœæŒä¹…æ€§çš„â€œé‡åšæ—¥å¿—â€")]),o._v(" "),_("p",[o._v("Redo Logï¼ˆé‡åšæ—¥å¿—ï¼‰æ˜¯InnoDBçš„ç‰©ç†æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œæ•°æ®é¡µçš„ç‰©ç†å˜æ›´â€ï¼ˆå¦‚â€œå°†æ•°æ®é¡µ1234ä¸­åç§»é‡56çš„å­—æ®µå€¼ä»10ä¿®æ”¹ä¸º20â€ï¼‰ï¼Œè€ŒéSQLè¯­å¥çš„é€»è¾‘å«ä¹‰ã€‚å…¶æ ¸å¿ƒä½œç”¨æ˜¯ï¼šå½“æ•°æ®åº“å´©æºƒæ—¶ï¼Œé€šè¿‡é‡æ”¾Redo Logä¸­çš„ç‰©ç†å˜æ›´ï¼Œæ¢å¤æ‰€æœ‰å·²æäº¤äº‹åŠ¡çš„ä¿®æ”¹ï¼Œä¿éšœæŒä¹…æ€§ã€‚")]),o._v(" "),_("h3",{attrs:{id:"_2-1-redo-logçš„æ ¸å¿ƒç‰¹æ€§"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-redo-logçš„æ ¸å¿ƒç‰¹æ€§"}},[o._v("#")]),o._v(" 2.1 Redo Logçš„æ ¸å¿ƒç‰¹æ€§")]),o._v(" "),_("ul",[_("li",[_("strong",[o._v("ç‰©ç†æ—¥å¿—")]),o._v("ï¼šç›´æ¥è®°å½•æ•°æ®é¡µçš„ç£ç›˜åœ°å€å’Œå­—èŠ‚çº§å˜æ›´ï¼Œé‡æ”¾æ—¶æ— éœ€è§£æSQLï¼Œç›´æ¥æ“ä½œç£ç›˜æ•°æ®é¡µï¼Œæ¢å¤é€Ÿåº¦å¿«ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("å¾ªç¯å†™å…¥")]),o._v("ï¼šRedo Logä»¥å›ºå®šå¤§å°çš„æ–‡ä»¶ç»„å½¢å¼å­˜å‚¨ï¼ˆé»˜è®¤åŒ…å«ib_logfile0ã€ib_logfile1ä¸¤ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ–‡ä»¶å†™æ»¡åä¼šå¾ªç¯è¦†ç›–æ—§æ—¥å¿—ï¼ˆå‰ææ˜¯æ—§æ—¥å¿—å¯¹åº”çš„äº‹åŠ¡å·²æäº¤ä¸”æ•°æ®å·²åˆ·ç›˜ï¼‰ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("é¡ºåºIO")]),o._v("ï¼šRedo Logçš„å†™å…¥æ˜¯ä¸¥æ ¼é¡ºåºçš„ï¼ˆä»…è¿½åŠ å†™å…¥ï¼‰ï¼Œè€Œæ•°æ®é¡µçš„ä¿®æ”¹æ˜¯éšæœºIOã€‚é¡ºåºIOçš„é€Ÿåº¦è¿œå¿«äºéšæœºIOï¼Œè¿™ä¹Ÿæ˜¯InnoDBé«˜æ€§èƒ½çš„å…³é”®åŸå› ä¹‹ä¸€ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("é¢„å†™æ—¥å¿—ï¼ˆWALï¼‰åŸåˆ™")]),o._v("ï¼šInnoDBéµå¾ªâ€œWrite-Ahead Loggingâ€åŸåˆ™ï¼Œå³"),_("strong",[o._v("å…ˆå†™Redo Logï¼Œå†ä¿®æ”¹å†…å­˜æ•°æ®é¡µ")]),o._v("ã€‚åªæœ‰å½“Redo Logå†™å…¥å®Œæˆåï¼Œæ‰ä¼šæ›´æ–°Buffer Poolä¸­çš„æ•°æ®é¡µï¼Œç¡®ä¿å³ä½¿å´©æºƒï¼Œä¹Ÿèƒ½é€šè¿‡Redo Logæ¢å¤æ•°æ®ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"_2-2-redo-logçš„ç»“æ„ä¸lsn-æ—¥å¿—åºåˆ—å·"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-redo-logçš„ç»“æ„ä¸lsn-æ—¥å¿—åºåˆ—å·"}},[o._v("#")]),o._v(" 2.2 Redo Logçš„ç»“æ„ä¸LSNï¼ˆæ—¥å¿—åºåˆ—å·ï¼‰")]),o._v(" "),_("p",[o._v("Redo Logçš„æ ¸å¿ƒç´¢å¼•æ˜¯"),_("strong",[o._v("LSNï¼ˆLog Sequence Numberï¼Œæ—¥å¿—åºåˆ—å·ï¼‰")]),o._v("ï¼ŒLSNæ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„64ä½æ•´æ•°ï¼Œæ¯å†™å…¥ä¸€æ¡Redo Logï¼ŒLSNå°±ä¼šé€’å¢ï¼Œç”¨äºæ ‡è®°æ—¥å¿—çš„å…ˆåé¡ºåºã€‚åŒæ—¶ï¼ŒLSNè¿˜å…³è”äº†æ•°æ®é¡µä¸Undo Logï¼Œæ˜¯å´©æºƒæ¢å¤æ—¶çš„â€œæ ¸å¿ƒåæ ‡â€ï¼š")]),o._v(" "),_("ul",[_("li",[o._v("æ¯ä¸ªRedo Logè®°å½•éƒ½åŒ…å«å½“å‰çš„LSNï¼ˆæ—¥å¿—LSNï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ¯ä¸ªæ•°æ®é¡µçš„å¤´éƒ¨éƒ½å­˜å‚¨ç€â€œæœ€åä¸€æ¬¡ä¿®æ”¹è¯¥é¡µçš„LSNâ€ï¼ˆé¡µLSNï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ¯ä¸ªUndo Logè®°å½•ä¹ŸåŒ…å«å¯¹åº”çš„LSNï¼Œç”¨äºå…³è”Redo Logã€‚")])]),o._v(" "),_("p",[o._v("Redo Logè®°å½•çš„æ ¸å¿ƒç»“æ„ï¼ˆç®€åŒ–ï¼‰ï¼š")]),o._v(" "),_("div",{staticClass:"language-plaintext line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-plaintext"}},[_("code",[o._v("| æ—¥å¿—ç±»å‹ï¼ˆå¦‚INSERT/UPDATEï¼‰ | è¡¨ç©ºé—´ID | æ•°æ®é¡µå· | é¡µå†…åç§»é‡ | å˜æ›´åçš„æ•°æ® | LSN | äº‹åŠ¡ID |\n")])]),o._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[o._v("1")]),_("br")])]),_("p",[o._v("é€šè¿‡è¡¨ç©ºé—´IDã€æ•°æ®é¡µå·ã€é¡µå†…åç§»é‡ï¼ŒInnoDBèƒ½ç²¾å‡†å®šä½åˆ°éœ€è¦ä¿®æ”¹çš„ç£ç›˜ä½ç½®ï¼Œé‡æ”¾æ—¶ç›´æ¥è¦†ç›–å¯¹åº”å­—èŠ‚ï¼Œæ•ˆç‡æé«˜ã€‚")]),o._v(" "),_("h3",{attrs:{id:"_2-3-redo-logçš„å†™å…¥æœºåˆ¶ä¸åˆ·ç›˜ç­–ç•¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-redo-logçš„å†™å…¥æœºåˆ¶ä¸åˆ·ç›˜ç­–ç•¥"}},[o._v("#")]),o._v(" 2.3 Redo Logçš„å†™å…¥æœºåˆ¶ä¸åˆ·ç›˜ç­–ç•¥")]),o._v(" "),_("p",[o._v("Redo Logçš„å†™å…¥æµç¨‹åˆ†ä¸ºâ€œå†…å­˜ç¼“å†²â€å’Œâ€œç£ç›˜æŒä¹…åŒ–â€ä¸¤ä¸ªé˜¶æ®µï¼Œæ ¸å¿ƒä¾èµ–"),_("code",[o._v("innodb_log_buffer_size")]),o._v("ï¼ˆæ—¥å¿—ç¼“å†²åŒºå¤§å°ï¼‰å’Œ"),_("code",[o._v("innodb_flush_log_at_trx_commit")]),o._v("ï¼ˆåˆ·ç›˜ç­–ç•¥å‚æ•°ï¼‰ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š")]),o._v(" "),_("h4",{attrs:{id:"_2-3-1-å†™å…¥æµç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-1-å†™å…¥æµç¨‹"}},[o._v("#")]),o._v(" 2.3.1 å†™å…¥æµç¨‹")]),o._v(" "),_("ol",[_("li",[o._v("äº‹åŠ¡æ‰§è¡Œæ•°æ®å˜æ›´æ—¶ï¼Œå…ˆå°†å˜æ›´å¯¹åº”çš„Redo Logå†™å…¥"),_("strong",[o._v("Redo Log Buffer")]),o._v("ï¼ˆå†…å­˜ç¼“å†²åŒºï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ ¹æ®åˆ·ç›˜ç­–ç•¥ï¼Œå°†Redo Log Bufferä¸­çš„å†…å®¹åˆ·å†™åˆ°ç£ç›˜çš„Redo Logæ–‡ä»¶ä¸­ã€‚")]),o._v(" "),_("li",[o._v("åˆ·ç›˜å®Œæˆåï¼Œå†æ›´æ–°Buffer Poolä¸­çš„æ•°æ®é¡µï¼ˆè„é¡µï¼‰ã€‚")])]),o._v(" "),_("h4",{attrs:{id:"_2-3-2-åˆ·ç›˜ç­–ç•¥-æ ¸å¿ƒå‚æ•°-innodb-flush-log-at-trx-commit"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-2-åˆ·ç›˜ç­–ç•¥-æ ¸å¿ƒå‚æ•°-innodb-flush-log-at-trx-commit"}},[o._v("#")]),o._v(" 2.3.2 åˆ·ç›˜ç­–ç•¥ï¼ˆæ ¸å¿ƒå‚æ•°ï¼šinnodb_flush_log_at_trx_commitï¼‰")]),o._v(" "),_("p",[o._v("è¯¥å‚æ•°ç›´æ¥å†³å®šRedo Logçš„åˆ·ç›˜æ—¶æœºï¼Œå½±å“â€œæŒä¹…æ€§â€ä¸â€œæ€§èƒ½â€çš„å¹³è¡¡ï¼Œæ˜¯ç”Ÿäº§ç¯å¢ƒçš„æ ¸å¿ƒé…ç½®ï¼š")]),o._v(" "),_("ul",[_("li",[_("code",[o._v("innodb_flush_log_at_trx_commit=0")]),o._v("ï¼šå¼‚æ­¥åˆ·ç›˜ã€‚äº‹åŠ¡æäº¤æ—¶ï¼Œä¸ä¸»åŠ¨åˆ·ç›˜ï¼Œä»…å°†Redo Logå†™å…¥Redo Log Bufferï¼›MySQLåå°çº¿ç¨‹æ¯1ç§’å°†Bufferä¸­çš„æ—¥å¿—åˆ·å†™åˆ°ç£ç›˜ã€‚ä¼˜ç‚¹ï¼šæ€§èƒ½æœ€å¥½ï¼›ç¼ºç‚¹ï¼šå®‰å…¨æ€§æœ€ä½â€”â€”å´©æºƒæ—¶å¯èƒ½ä¸¢å¤±1ç§’å†…æ‰€æœ‰å·²æäº¤äº‹åŠ¡çš„Redo Logã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_flush_log_at_trx_commit=1")]),o._v("ï¼šåŒæ­¥åˆ·ç›˜ï¼ˆé»˜è®¤å€¼ï¼‰ã€‚æ¯æ¬¡äº‹åŠ¡æäº¤æ—¶ï¼Œéƒ½å°†Redo Log Bufferä¸­çš„å½“å‰äº‹åŠ¡æ—¥å¿—å¼ºåˆ¶åˆ·å†™åˆ°ç£ç›˜ï¼ˆè°ƒç”¨fsync()ï¼‰ã€‚ä¼˜ç‚¹ï¼šå®‰å…¨æ€§æœ€é«˜ï¼Œç¡®ä¿å·²æäº¤äº‹åŠ¡çš„Redo Logä¸ä¸¢å¤±ï¼›ç¼ºç‚¹ï¼šæ€§èƒ½æœ€å·®ï¼ˆé¢‘ç¹fsync()æ¶ˆè€—IOèµ„æºï¼‰ã€‚ç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒä¸šåŠ¡é¦–é€‰æ­¤é…ç½®ã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_flush_log_at_trx_commit=2")]),o._v("ï¼šåŠåŒæ­¥åˆ·ç›˜ã€‚äº‹åŠ¡æäº¤æ—¶ï¼Œå°†Redo Logå†™å…¥æ“ä½œç³»ç»Ÿç¼“å­˜ï¼ˆOS Cacheï¼‰ï¼Œä¸å¼ºåˆ¶åˆ·ç›˜ï¼›æ“ä½œç³»ç»Ÿæ¯1ç§’å°†OS Cacheä¸­çš„æ—¥å¿—åˆ·å†™åˆ°ç£ç›˜ã€‚ä¼˜ç‚¹ï¼šæ€§èƒ½ä¼˜äº1ï¼Œå®‰å…¨æ€§ä¼˜äº0ï¼›ç¼ºç‚¹ï¼šå´©æºƒæ—¶å¯èƒ½ä¸¢å¤±OS Cacheä¸­çš„æ—¥å¿—ï¼ˆå¦‚æœåŠ¡å™¨æ–­ç”µï¼ŒOS Cacheæ•°æ®ä¸¢å¤±ï¼‰ï¼Œä»…é€‚ç”¨äºéæ ¸å¿ƒä¸šåŠ¡ã€‚")])]),o._v(" "),_("p",[o._v("è¡¥å……ï¼šå³ä½¿æœªæäº¤äº‹åŠ¡ï¼ŒRedo Logä¹Ÿå¯èƒ½è¢«åˆ·ç›˜ï¼ˆå¦‚Redo Log Bufferæ»¡ã€åå°çº¿ç¨‹å®šæœŸåˆ·ç›˜ï¼‰ï¼Œä½†è¿™ä¸ä¼šå½±å“æ•°æ®ä¸€è‡´æ€§â€”â€”æœªæäº¤äº‹åŠ¡çš„Redo Logä¼šåœ¨å´©æºƒæ¢å¤æ—¶è¢«Undo Logå›æ»šã€‚")]),o._v(" "),_("h2",{attrs:{id:"ä¸‰ã€undo-log-ä¿éšœåŸå­æ€§çš„-å›æ»šæ—¥å¿—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€undo-log-ä¿éšœåŸå­æ€§çš„-å›æ»šæ—¥å¿—"}},[o._v("#")]),o._v(" ä¸‰ã€Undo Logï¼šä¿éšœåŸå­æ€§çš„â€œå›æ»šæ—¥å¿—â€")]),o._v(" "),_("p",[o._v("Undo Logï¼ˆå›æ»šæ—¥å¿—ï¼‰æ˜¯InnoDBçš„é€»è¾‘æ—¥å¿—ï¼Œè®°å½•çš„æ˜¯â€œäº‹åŠ¡æ‰§è¡Œå‰çš„æ•°æ®çŠ¶æ€â€ï¼ˆå¦‚â€œUPDATE user SET age=26 WHERE id=1â€çš„Undo Logè®°å½•â€œid=1çš„ageåŸå€¼ä¸º25â€ï¼‰ã€‚å…¶æ ¸å¿ƒä½œç”¨æ˜¯ï¼š")]),o._v(" "),_("ul",[_("li",[o._v("äº‹åŠ¡å›æ»šï¼šå½“äº‹åŠ¡æ‰§è¡ŒROLLBACKï¼Œæˆ–å´©æºƒåéœ€è¦å›æ»šæœªæäº¤äº‹åŠ¡æ—¶ï¼Œé€šè¿‡Undo Logæ¢å¤æ•°æ®åˆ°äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ã€‚")]),o._v(" "),_("li",[o._v("MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ï¼šUndo Logä¼šä¿ç•™æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼Œä¾›å…¶ä»–äº‹åŠ¡è¯»å–ï¼ˆå¦‚READ COMMITTEDã€REPEATABLE READéš”ç¦»çº§åˆ«ä¸‹çš„å¿«ç…§è¯»ï¼‰ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"_3-1-undo-logçš„æ ¸å¿ƒç‰¹æ€§"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-undo-logçš„æ ¸å¿ƒç‰¹æ€§"}},[o._v("#")]),o._v(" 3.1 Undo Logçš„æ ¸å¿ƒç‰¹æ€§")]),o._v(" "),_("ul",[_("li",[_("strong",[o._v("é€»è¾‘æ—¥å¿—")]),o._v("ï¼šè®°å½•çš„æ˜¯SQLæ“ä½œçš„é€†æ“ä½œï¼ˆå¦‚INSERTçš„é€†æ“ä½œæ˜¯DELETEï¼ŒUPDATEçš„é€†æ“ä½œæ˜¯æ¢å¤åŸå€¼ï¼‰ï¼Œè€Œéç‰©ç†æ•°æ®å˜æ›´ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("äº‹åŠ¡ç§æœ‰")]),o._v("ï¼šæ¯ä¸ªäº‹åŠ¡éƒ½æœ‰ä¸“å±çš„Undo Logï¼Œå­˜å‚¨åœ¨"),_("strong",[o._v("Undoæ®µ")]),o._v("ï¼ˆUndo Segmentï¼‰ä¸­ï¼ŒUndoæ®µä½äºå…±äº«è¡¨ç©ºé—´ï¼ˆibdata1ï¼‰æˆ–ç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆ.ibdæ–‡ä»¶ï¼ŒMySQL 5.6+æ”¯æŒï¼‰ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("å¯é‡ç”¨æ€§")]),o._v("ï¼šå½“äº‹åŠ¡æäº¤åï¼Œå…¶Undo Logä¸ä¼šç«‹å³åˆ é™¤ï¼Œè€Œæ˜¯æ ‡è®°ä¸ºâ€œå¯é‡ç”¨â€â€”â€”åªæœ‰å½“æ‰€æœ‰ä¾èµ–è¯¥Undo Logçš„å¿«ç…§è¯»äº‹åŠ¡ç»“æŸåï¼ŒUndo Logæ‰ä¼šè¢«æ¸…ç†ï¼ˆç”±Purgeçº¿ç¨‹è´Ÿè´£ï¼‰ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("ä¾èµ–Redo Logä¿éšœæŒä¹…æ€§")]),o._v("ï¼šUndo Logæœ¬èº«çš„å†™å…¥ä¹Ÿéµå¾ªWALåŸåˆ™ï¼Œå…ˆå°†Undo Logçš„å˜æ›´å†™å…¥Redo Logï¼Œå†å†™å…¥Undoæ®µã€‚ç¡®ä¿å³ä½¿å´©æºƒï¼ŒUndo Logæœ¬èº«ä¹Ÿèƒ½é€šè¿‡Redo Logæ¢å¤ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"_3-2-undo-logçš„ç±»å‹ä¸ç»“æ„"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-undo-logçš„ç±»å‹ä¸ç»“æ„"}},[o._v("#")]),o._v(" 3.2 Undo Logçš„ç±»å‹ä¸ç»“æ„")]),o._v(" "),_("p",[o._v("æ ¹æ®äº‹åŠ¡æ“ä½œç±»å‹ï¼ŒUndo Logåˆ†ä¸ºä¸¤ç§æ ¸å¿ƒç±»å‹ï¼š")]),o._v(" "),_("h4",{attrs:{id:"_3-2-1-insert-undo-log"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-insert-undo-log"}},[o._v("#")]),o._v(" 3.2.1 INSERT Undo Log")]),o._v(" "),_("p",[o._v("å¯¹åº”INSERTæ“ä½œçš„å›æ»šæ—¥å¿—ã€‚ç”±äºINSERTçš„è®°å½•æ˜¯äº‹åŠ¡ä¸“å±çš„ï¼ˆå…¶ä»–äº‹åŠ¡æ— æ³•è¯»å–æœªæäº¤çš„INSERTè®°å½•ï¼‰ï¼Œå› æ­¤äº‹åŠ¡æäº¤åï¼ŒINSERT Undo Logå¯ç«‹å³è¢«æ ‡è®°ä¸ºå¯é‡ç”¨ï¼Œæ— éœ€ç­‰å¾…Purgeçº¿ç¨‹æ¸…ç†ã€‚")]),o._v(" "),_("p",[o._v("ç»“æ„ç®€åŒ–ï¼š")]),o._v(" "),_("div",{staticClass:"language-plaintext line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-plaintext"}},[_("code",[o._v("| æ—¥å¿—ç±»å‹ï¼ˆINSERT_UNDOï¼‰ | äº‹åŠ¡ID | è¡¨ID | æ’å…¥è®°å½•çš„ä¸»é”®å€¼ | LSN |\n")])]),o._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[o._v("1")]),_("br")])]),_("h4",{attrs:{id:"_3-2-2-update-undo-log"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-2-update-undo-log"}},[o._v("#")]),o._v(" 3.2.2 UPDATE Undo Log")]),o._v(" "),_("p",[o._v("å¯¹åº”UPDATE/DELETEæ“ä½œçš„å›æ»šæ—¥å¿—ã€‚è¿™ç±»æ“ä½œä¼šä¿®æ”¹å·²å­˜åœ¨çš„æ•°æ®ï¼Œå…¶Undo Logéœ€è¦ä¿ç•™æ•°æ®çš„å†å²ç‰ˆæœ¬ï¼ˆä¾›MVCCè¯»å–ï¼‰ï¼Œå› æ­¤äº‹åŠ¡æäº¤åï¼Œéœ€ç­‰å¾…æ‰€æœ‰ä¾èµ–è¯¥ç‰ˆæœ¬çš„äº‹åŠ¡ç»“æŸï¼Œæ‰èƒ½è¢«Purgeçº¿ç¨‹æ¸…ç†ã€‚")]),o._v(" "),_("p",[o._v("ç»“æ„ç®€åŒ–ï¼ˆä»¥UPDATEä¸ºä¾‹ï¼‰ï¼š")]),o._v(" "),_("div",{staticClass:"language-plaintext line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-plaintext"}},[_("code",[o._v("| æ—¥å¿—ç±»å‹ï¼ˆUPDATE_UNDOï¼‰ | äº‹åŠ¡ID | è¡¨ID | è®°å½•ä¸»é”®å€¼ | è¢«ä¿®æ”¹å­—æ®µçš„åŸå€¼ï¼ˆå¦‚age=25ï¼‰ | ä¸Šä¸€ä¸ªUndo Logçš„æŒ‡é’ˆï¼ˆå½¢æˆç‰ˆæœ¬é“¾ï¼‰ | LSN |\n")])]),o._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[o._v("1")]),_("br")])]),_("p",[o._v("å…¶ä¸­ï¼Œâ€œä¸Šä¸€ä¸ªUndo Logçš„æŒ‡é’ˆâ€ä¼šå½¢æˆä¸€æ¡â€œç‰ˆæœ¬é“¾â€ï¼ŒMVCCé€šè¿‡éå†ç‰ˆæœ¬é“¾è·å–æ•°æ®çš„å†å²ç‰ˆæœ¬ã€‚")]),o._v(" "),_("h3",{attrs:{id:"_3-3-undo-logçš„ç”Ÿå‘½å‘¨æœŸ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-undo-logçš„ç”Ÿå‘½å‘¨æœŸ"}},[o._v("#")]),o._v(" 3.3 Undo Logçš„ç”Ÿå‘½å‘¨æœŸ")]),o._v(" "),_("ol",[_("li",[o._v("äº‹åŠ¡å¯åŠ¨æ—¶ï¼ŒInnoDBä¸ºå…¶åˆ†é…ä¸“å±çš„Undoæ®µã€‚")]),o._v(" "),_("li",[o._v("äº‹åŠ¡æ‰§è¡ŒINSERT/UPDATE/DELETEæ“ä½œæ—¶ï¼Œå®æ—¶ç”Ÿæˆå¯¹åº”çš„Undo Logï¼Œå†™å…¥Undoæ®µï¼ˆéµå¾ªWALåŸåˆ™ï¼Œå…ˆå†™Redo Logï¼‰ã€‚")]),o._v(" "),_("li",[o._v("äº‹åŠ¡å›æ»šæ—¶ï¼ŒInnoDBè¯»å–Undo Logï¼Œæ‰§è¡Œé€†æ“ä½œï¼ˆå¦‚DELETEå¯¹åº”INSERTï¼ŒUPDATEå¯¹åº”æ¢å¤åŸå€¼ï¼‰ï¼Œæ¢å¤æ•°æ®ã€‚")]),o._v(" "),_("li",[o._v("äº‹åŠ¡æäº¤æ—¶ï¼ŒInnoDBæ ‡è®°Undo Logä¸ºâ€œå¯é‡ç”¨â€ï¼š\n"),_("ul",[_("li",[o._v("INSERT Undo Logï¼šç›´æ¥æ ‡è®°å¯é‡ç”¨ï¼Œåç»­å¯è¢«æ–°äº‹åŠ¡è¦†ç›–ã€‚")]),o._v(" "),_("li",[o._v("UPDATE Undo Logï¼šæ ‡è®°ä¸ºå¯é‡ç”¨ï¼ŒåŒæ—¶è®°å½•åˆ°â€œå†å²ç‰ˆæœ¬åˆ—è¡¨â€ï¼Œç­‰å¾…Purgeçº¿ç¨‹æ¸…ç†ï¼ˆéœ€ç¡®ä¿æ— å¿«ç…§è¯»äº‹åŠ¡ä¾èµ–ï¼‰ã€‚")])])]),o._v(" "),_("li",[o._v("Purgeçº¿ç¨‹å®šæœŸæ‰«æâ€œå†å²ç‰ˆæœ¬åˆ—è¡¨â€ï¼Œæ¸…ç†æ— ä¾èµ–çš„Undo Logï¼Œé‡Šæ”¾ç£ç›˜ç©ºé—´ã€‚")])]),o._v(" "),_("h2",{attrs:{id:"å››ã€æ ¸å¿ƒååŒé€»è¾‘-redo-logä¸undo-logå¦‚ä½•é…åˆä¿éšœä¸€è‡´æ€§"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€æ ¸å¿ƒååŒé€»è¾‘-redo-logä¸undo-logå¦‚ä½•é…åˆä¿éšœä¸€è‡´æ€§"}},[o._v("#")]),o._v(" å››ã€æ ¸å¿ƒååŒé€»è¾‘ï¼šRedo Logä¸Undo Logå¦‚ä½•é…åˆä¿éšœä¸€è‡´æ€§ï¼Ÿ")]),o._v(" "),_("p",[o._v("Redo Logä¿éšœâ€œå·²æäº¤äº‹åŠ¡ä¸ä¸¢å¤±â€ï¼ŒUndo Logä¿éšœâ€œæœªæäº¤äº‹åŠ¡ä¸æ®‹ç•™â€ï¼Œä¸¤è€…é€šè¿‡LSNå’Œäº‹åŠ¡IDå…³è”ï¼Œåœ¨å´©æºƒæ¢å¤æ—¶å½¢æˆâ€œå…ˆé‡åšã€åå›æ»šâ€çš„ååŒæµç¨‹ã€‚æ ¸å¿ƒé€»è¾‘å¯æ€»ç»“ä¸ºï¼š")]),o._v(" "),_("blockquote",[_("p",[o._v("ğŸ’¡ å´©æºƒæ¢å¤çš„æ ¸å¿ƒåŸåˆ™ï¼šå…ˆé€šè¿‡Redo Logé‡æ”¾æ‰€æœ‰å·²è®°å½•çš„ç‰©ç†å˜æ›´ï¼ˆæ— è®ºäº‹åŠ¡æ˜¯å¦æäº¤ï¼‰ï¼Œå°†æ•°æ®åº“æ¢å¤åˆ°å´©æºƒå‰çš„å†…å­˜çŠ¶æ€ï¼›å†é€šè¿‡Undo Logå›æ»šæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡ï¼Œæœ€ç»ˆä¿éšœæ•°æ®ä¸€è‡´æ€§ã€‚")])]),o._v(" "),_("p",[o._v("ä¸¤è€…çš„ååŒå…³ç³»å¯é€šè¿‡ä¸€ä¸ªå…·ä½“äº‹åŠ¡æ¡ˆä¾‹ç†è§£ï¼š")]),o._v(" "),_("h3",{attrs:{id:"æ¡ˆä¾‹-äº‹åŠ¡æ‰§è¡Œä¸å´©æºƒæ¢å¤çš„ååŒè¿‡ç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹-äº‹åŠ¡æ‰§è¡Œä¸å´©æºƒæ¢å¤çš„ååŒè¿‡ç¨‹"}},[o._v("#")]),o._v(" æ¡ˆä¾‹ï¼šäº‹åŠ¡æ‰§è¡Œä¸å´©æºƒæ¢å¤çš„ååŒè¿‡ç¨‹")]),o._v(" "),_("p",[o._v("å‡è®¾å­˜åœ¨äº‹åŠ¡T1ï¼Œæ‰§è¡Œâ€œUPDATE user SET age=26 WHERE id=1â€ï¼ˆåŸage=25ï¼‰ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æ•°æ®åº“å´©æºƒï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š")]),o._v(" "),_("h4",{attrs:{id:"_1-äº‹åŠ¡æ‰§è¡Œæ—¶çš„æ—¥å¿—å†™å…¥-ååŒå‰ç½®"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_1-äº‹åŠ¡æ‰§è¡Œæ—¶çš„æ—¥å¿—å†™å…¥-ååŒå‰ç½®"}},[o._v("#")]),o._v(" 1. äº‹åŠ¡æ‰§è¡Œæ—¶çš„æ—¥å¿—å†™å…¥ï¼ˆååŒå‰ç½®ï¼‰")]),o._v(" "),_("ol",[_("li",[o._v("T1å¯åŠ¨ï¼ŒInnoDBåˆ†é…äº‹åŠ¡ID=123ï¼Œåˆ†é…ä¸“å±Undoæ®µã€‚")]),o._v(" "),_("li",[o._v("T1æ‰§è¡ŒUPDATEæ“ä½œï¼š\n"),_("ul",[_("li",[o._v("ç”ŸæˆUPDATE Undo Logï¼Œè®°å½•â€œid=1ï¼ŒageåŸå€¼=25ï¼Œäº‹åŠ¡ID=123ï¼ŒLSN=1000â€ã€‚")]),o._v(" "),_("li",[o._v("éµå¾ªWALåŸåˆ™ï¼Œå…ˆå°†Undo Logçš„å˜æ›´å†™å…¥Redo Logï¼ˆLSN=1000ï¼‰ï¼Œå†å°†Undo Logå†™å…¥Undoæ®µã€‚")]),o._v(" "),_("li",[o._v("ç”ŸæˆRedo Logè®°å½•ï¼Œè®°å½•â€œè¡¨ç©ºé—´ID=1ï¼Œæ•°æ®é¡µå·=456ï¼Œåç§»é‡=78ï¼Œageä»25æ”¹ä¸º26ï¼Œäº‹åŠ¡ID=123ï¼ŒLSN=1001â€ã€‚")]),o._v(" "),_("li",[o._v("å°†Redo Logï¼ˆLSN=1001ï¼‰å†™å…¥Redo Log Bufferï¼Œè‹¥é…ç½®innodb_flush_log_at_trx_commit=1ï¼Œåˆ™ç«‹å³åˆ·ç›˜ã€‚")]),o._v(" "),_("li",[o._v("æ›´æ–°Buffer Poolä¸­æ•°æ®é¡µ456çš„ageå€¼ä¸º26ï¼Œæ•°æ®é¡µçš„é¡µLSNæ›´æ–°ä¸º1001ã€‚")])])]),o._v(" "),_("li",[o._v("è‹¥T1æœªæäº¤æ—¶æ•°æ®åº“å´©æºƒï¼ˆå¦‚æ–­ç”µï¼‰ï¼Œæ­¤æ—¶Redo Logå·²åˆ·ç›˜ï¼ˆLSN=1000~1001ï¼‰ï¼Œä½†æ•°æ®é¡µæœªåˆ·ç›˜ï¼ˆä»ä¸ºage=25ï¼‰ã€‚")])]),o._v(" "),_("h4",{attrs:{id:"_2-å´©æºƒæ¢å¤æ—¶çš„ååŒæµç¨‹"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_2-å´©æºƒæ¢å¤æ—¶çš„ååŒæµç¨‹"}},[o._v("#")]),o._v(" 2. å´©æºƒæ¢å¤æ—¶çš„ååŒæµç¨‹")]),o._v(" "),_("ol",[_("li",[o._v("Redo Logé‡æ”¾ï¼ˆå‰æ»šï¼‰ï¼šInnoDBæ‰«æRedo Logï¼Œå‘ç°LSN=1000~1001çš„æ—¥å¿—ï¼Œæ ¹æ®æ—¥å¿—ä¸­çš„ç‰©ç†åœ°å€ï¼Œå°†æ•°æ®é¡µ456çš„ageä¿®æ”¹ä¸º26ï¼ˆæ­¤æ—¶æ•°æ®é¡µçŠ¶æ€ä¸å´©æºƒå‰å†…å­˜çŠ¶æ€ä¸€è‡´ï¼ŒåŒ…å«æœªæäº¤çš„T1å˜æ›´ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("Undo Logå›æ»šï¼ˆæ’¤é”€æœªæäº¤äº‹åŠ¡ï¼‰ï¼šInnoDBé€šè¿‡äº‹åŠ¡IDè¯†åˆ«åˆ°T1æœªæäº¤ï¼Œè¯»å–å…¶Undo Logï¼ˆLSN=1000ï¼‰ï¼Œæ‰§è¡Œé€†æ“ä½œï¼ˆå°†ageæ¢å¤ä¸º25ï¼‰ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„Redo Logï¼ˆæ ‡è®°å›æ»šæ“ä½œï¼ŒLSN=1002ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æœ€ç»ˆï¼Œæ•°æ®é¡µæ¢å¤ä¸ºå´©æºƒå‰çš„åŸå§‹çŠ¶æ€ï¼ˆage=25ï¼‰ï¼Œæœªæäº¤çš„T1å˜æ›´è¢«å®Œå…¨å›æ»šï¼Œå·²æäº¤äº‹åŠ¡ï¼ˆè‹¥æœ‰ï¼‰çš„å˜æ›´é€šè¿‡Redo Logä¿ç•™ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"å…³é”®å…³è”ç‚¹-lsnä¸äº‹åŠ¡çŠ¶æ€çš„è”åŠ¨"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å…³é”®å…³è”ç‚¹-lsnä¸äº‹åŠ¡çŠ¶æ€çš„è”åŠ¨"}},[o._v("#")]),o._v(" å…³é”®å…³è”ç‚¹ï¼šLSNä¸äº‹åŠ¡çŠ¶æ€çš„è”åŠ¨")]),o._v(" "),_("p",[o._v("å´©æºƒæ¢å¤æ—¶ï¼ŒInnoDBéœ€è¦é€šè¿‡â€œLSN+äº‹åŠ¡çŠ¶æ€â€åˆ¤æ–­å“ªäº›æ—¥å¿—éœ€è¦é‡æ”¾ã€å“ªäº›éœ€è¦å›æ»šï¼š")]),o._v(" "),_("ul",[_("li",[o._v("äº‹åŠ¡çŠ¶æ€è®°å½•ï¼šInnoDBåœ¨ç³»ç»Ÿè¡¨ç©ºé—´ï¼ˆibdata1ï¼‰ä¸­è®°å½•æ‰€æœ‰äº‹åŠ¡çš„çŠ¶æ€ï¼ˆæäº¤/æœªæäº¤/æ­£åœ¨æ‰§è¡Œï¼‰ã€‚")]),o._v(" "),_("li",[o._v("LSNèŒƒå›´åŒ¹é…ï¼šå¯¹äºå·²æäº¤äº‹åŠ¡ï¼Œå…¶å¯¹åº”çš„Redo Logéœ€è¦å®Œæ•´é‡æ”¾ï¼ˆç¡®ä¿æŒä¹…æ€§ï¼‰ï¼›å¯¹äºæœªæäº¤äº‹åŠ¡ï¼Œå…¶å¯¹åº”çš„Redo Logå³ä½¿å·²åˆ·ç›˜ï¼Œä¹Ÿéœ€è¦é€šè¿‡Undo Logå›æ»šï¼ˆç¡®ä¿åŸå­æ€§ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ•°æ®é¡µLSNæ ¡éªŒï¼šé‡æ”¾Redo Logæ—¶ï¼Œè‹¥æ—¥å¿—LSNå°äºæ•°æ®é¡µçš„é¡µLSNï¼Œè¯´æ˜è¯¥æ—¥å¿—å·²è¢«åº”ç”¨åˆ°æ•°æ®é¡µï¼Œæ— éœ€é‡å¤é‡æ”¾ï¼›è‹¥æ—¥å¿—LSNå¤§äºé¡µLSNï¼Œåˆ™éœ€è¦é‡æ”¾ã€‚")])]),o._v(" "),_("h2",{attrs:{id:"äº”ã€innodbå´©æºƒæ¢å¤çš„å®Œæ•´æµç¨‹-å››é˜¶æ®µ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€innodbå´©æºƒæ¢å¤çš„å®Œæ•´æµç¨‹-å››é˜¶æ®µ"}},[o._v("#")]),o._v(" äº”ã€InnoDBå´©æºƒæ¢å¤çš„å®Œæ•´æµç¨‹ï¼ˆå››é˜¶æ®µï¼‰")]),o._v(" "),_("p",[o._v("å½“MySQLé‡å¯åï¼ŒInnoDBä¼šè‡ªåŠ¨è§¦å‘å´©æºƒæ¢å¤æµç¨‹ï¼Œåˆ†ä¸ºâ€œåˆå§‹åŒ–é˜¶æ®µâ†’Redoé˜¶æ®µï¼ˆå‰æ»šï¼‰â†’Undoé˜¶æ®µï¼ˆå›æ»šï¼‰â†’æ¸…ç†é˜¶æ®µâ€å››ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼Œæ¯ä¸ªæ­¥éª¤çš„å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š")]),o._v(" "),_("h3",{attrs:{id:"é˜¶æ®µ1-åˆå§‹åŒ–é˜¶æ®µ-å‡†å¤‡ç¯å¢ƒ"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#é˜¶æ®µ1-åˆå§‹åŒ–é˜¶æ®µ-å‡†å¤‡ç¯å¢ƒ"}},[o._v("#")]),o._v(" é˜¶æ®µ1ï¼šåˆå§‹åŒ–é˜¶æ®µï¼ˆå‡†å¤‡ç¯å¢ƒï¼‰")]),o._v(" "),_("ol",[_("li",[o._v("åŠ è½½InnoDBé…ç½®å‚æ•°ï¼ˆå¦‚innodb_log_file_sizeã€innodb_data_file_pathç­‰ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("åˆå§‹åŒ–Buffer Poolã€æ—¥å¿—ç¼“å†²åŒºç­‰å†…å­˜ç»“æ„ã€‚")]),o._v(" "),_("li",[o._v("æ‰“å¼€Redo Logæ–‡ä»¶ç»„ï¼Œè¯»å–Redo Logçš„èµ·å§‹LSNå’Œæœ«å°¾LSNï¼Œç¡®å®šéœ€è¦æ‰«æçš„æ—¥å¿—èŒƒå›´ã€‚")]),o._v(" "),_("li",[o._v("è¯»å–ç³»ç»Ÿè¡¨ç©ºé—´ä¸­çš„äº‹åŠ¡çŠ¶æ€ä¿¡æ¯ï¼ˆtrx_sysï¼‰ï¼Œè·å–æ‰€æœ‰æœªæäº¤äº‹åŠ¡çš„åˆ—è¡¨ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"é˜¶æ®µ2-redoé˜¶æ®µ-å‰æ»šæ‰€æœ‰å·²è®°å½•çš„å˜æ›´"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#é˜¶æ®µ2-redoé˜¶æ®µ-å‰æ»šæ‰€æœ‰å·²è®°å½•çš„å˜æ›´"}},[o._v("#")]),o._v(" é˜¶æ®µ2ï¼šRedoé˜¶æ®µï¼ˆå‰æ»šæ‰€æœ‰å·²è®°å½•çš„å˜æ›´ï¼‰")]),o._v(" "),_("p",[o._v("æ ¸å¿ƒç›®æ ‡ï¼šå°†æ•°æ®åº“æ¢å¤åˆ°å´©æºƒå‰çš„å†…å­˜çŠ¶æ€ï¼ŒåŒ…æ‹¬å·²æäº¤å’Œæœªæäº¤äº‹åŠ¡çš„å˜æ›´ã€‚")]),o._v(" "),_("ol",[_("li",[o._v("ç¡®å®šé‡æ”¾èŒƒå›´ï¼šä»â€œ checkpoint LSN â€å¼€å§‹ï¼Œåˆ°Redo Logçš„æœ«å°¾LSNç»“æŸã€‚Checkpoint LSNæ˜¯æŒ‡â€œå·²å°†Redo Logå¯¹åº”çš„å˜æ›´åˆ·å†™åˆ°æ•°æ®é¡µçš„æœ€å¤§LSNâ€â€”â€”å°äºcheckpoint LSNçš„æ—¥å¿—å·²æ— éœ€é‡æ”¾ï¼ˆæ•°æ®å·²æŒä¹…åŒ–ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("é€å¥é‡æ”¾Redo Logï¼š\n"),_("ul",[_("li",[o._v("å¯¹äºæ¯æ¡Redo Logï¼Œè§£æå…¶è¡¨ç©ºé—´IDã€æ•°æ®é¡µå·ã€åç§»é‡å’Œå˜æ›´æ•°æ®ã€‚")]),o._v(" "),_("li",[o._v("å°†å¯¹åº”æ•°æ®é¡µåŠ è½½åˆ°Buffer Poolï¼ˆè‹¥æœªåŠ è½½ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ ¡éªŒæ—¥å¿—LSNä¸é¡µLSNï¼šè‹¥æ—¥å¿—LSN > é¡µLSNï¼Œåˆ™åº”ç”¨å˜æ›´ï¼Œæ›´æ–°é¡µLSNï¼›å¦åˆ™è·³è¿‡ã€‚")])])]),o._v(" "),_("li",[o._v("é‡æ”¾å®Œæˆåï¼ŒBuffer Poolä¸­çš„æ•°æ®çŠ¶æ€ä¸å´©æºƒå‰å®Œå…¨ä¸€è‡´ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"é˜¶æ®µ3-undoé˜¶æ®µ-å›æ»šæœªæäº¤äº‹åŠ¡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#é˜¶æ®µ3-undoé˜¶æ®µ-å›æ»šæœªæäº¤äº‹åŠ¡"}},[o._v("#")]),o._v(" é˜¶æ®µ3ï¼šUndoé˜¶æ®µï¼ˆå›æ»šæœªæäº¤äº‹åŠ¡ï¼‰")]),o._v(" "),_("p",[o._v("æ ¸å¿ƒç›®æ ‡ï¼šé€šè¿‡Undo Logå›æ»šæ‰€æœ‰æœªæäº¤çš„äº‹åŠ¡ï¼Œä¿éšœåŸå­æ€§ã€‚")]),o._v(" "),_("ol",[_("li",[o._v("éå†æœªæäº¤äº‹åŠ¡åˆ—è¡¨ï¼šä»é˜¶æ®µ1è·å–çš„æœªæäº¤äº‹åŠ¡ä¸­ï¼Œé€ä¸ªå¤„ç†ã€‚")]),o._v(" "),_("li",[o._v("å®šä½äº‹åŠ¡çš„Undo Logï¼šé€šè¿‡äº‹åŠ¡IDæ‰¾åˆ°å…¶å¯¹åº”çš„Undoæ®µå’ŒUndo Logè®°å½•ï¼ˆä¾èµ–LSNå…³è”ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ‰§è¡Œå›æ»šæ“ä½œï¼š\n"),_("ul",[_("li",[o._v("è¯»å–Undo Logä¸­çš„é€†æ“ä½œæŒ‡ä»¤ï¼Œåœ¨Buffer Poolä¸­æ¢å¤æ•°æ®ï¼ˆå¦‚UPDATEå›æ»šä¸ºåŸå€¼ï¼ŒINSERTå›æ»šä¸ºåˆ é™¤ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("ä¸ºå›æ»šæ“ä½œç”Ÿæˆæ–°çš„Redo Logï¼ˆæ ‡è®°ä¸ºâ€œå›æ»šæ—¥å¿—â€ï¼‰ï¼Œç¡®ä¿å›æ»šæ“ä½œæœ¬èº«çš„æŒä¹…æ€§ã€‚")])])]),o._v(" "),_("li",[o._v("æ ‡è®°äº‹åŠ¡ä¸ºâ€œå·²å›æ»šâ€ï¼šå›æ»šå®Œæˆåï¼Œæ›´æ–°äº‹åŠ¡çŠ¶æ€ï¼Œé‡Šæ”¾ç›¸å…³èµ„æºã€‚")])]),o._v(" "),_("h3",{attrs:{id:"é˜¶æ®µ4-æ¸…ç†é˜¶æ®µ-purgeæ— ç”¨æ—¥å¿—"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#é˜¶æ®µ4-æ¸…ç†é˜¶æ®µ-purgeæ— ç”¨æ—¥å¿—"}},[o._v("#")]),o._v(" é˜¶æ®µ4ï¼šæ¸…ç†é˜¶æ®µï¼ˆPurgeæ— ç”¨æ—¥å¿—ï¼‰")]),o._v(" "),_("ol",[_("li",[o._v("å¯åŠ¨Purgeçº¿ç¨‹ï¼Œæ¸…ç†å·²æäº¤äº‹åŠ¡çš„Undo Logï¼ˆå°¤å…¶æ˜¯UPDATE Undo Logï¼‰ã€‚")]),o._v(" "),_("li",[o._v("æ£€æŸ¥Redo Logçš„checkpoint LSNï¼Œå°†å·²æŒä¹…åŒ–çš„Redo Logæ ‡è®°ä¸ºå¯è¦†ç›–ã€‚")]),o._v(" "),_("li",[o._v("ä¼˜åŒ–Buffer Poolï¼šå°†æœªåˆ·ç›˜çš„è„é¡µï¼ˆå·²æäº¤äº‹åŠ¡çš„å˜æ›´ï¼‰åŠ å…¥åˆ·ç›˜é˜Ÿåˆ—ï¼Œç”±åå°çº¿ç¨‹å¼‚æ­¥åˆ·å†™åˆ°ç£ç›˜ã€‚")])]),o._v(" "),_("p",[o._v("å½“å››ä¸ªé˜¶æ®µå®Œæˆåï¼ŒMySQLæ­£å¼å¯¹å¤–æä¾›æœåŠ¡ï¼Œæ­¤æ—¶æ•°æ®åº“ä¸­çš„æ•°æ®å®Œå…¨ç¬¦åˆACIDç‰¹æ€§ï¼šå·²æäº¤äº‹åŠ¡çš„å˜æ›´å…¨éƒ¨ä¿ç•™ï¼Œæœªæäº¤äº‹åŠ¡çš„å˜æ›´å®Œå…¨å›æ»šã€‚")]),o._v(" "),_("h2",{attrs:{id:"å…­ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–-å´©æºƒæ¢å¤æ€§èƒ½ä¸ç¨³å®šæ€§æå‡"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#å…­ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–-å´©æºƒæ¢å¤æ€§èƒ½ä¸ç¨³å®šæ€§æå‡"}},[o._v("#")]),o._v(" å…­ã€ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–ï¼šå´©æºƒæ¢å¤æ€§èƒ½ä¸ç¨³å®šæ€§æå‡")]),o._v(" "),_("p",[o._v("å´©æºƒæ¢å¤çš„æ€§èƒ½å’Œç¨³å®šæ€§ï¼Œç›´æ¥å½±å“æ•°æ®åº“å´©æºƒåçš„æ¢å¤æ—¶é—´å’Œä¸šåŠ¡å¯ç”¨æ€§ã€‚ç»“åˆå‰é¢çš„åŸç†ï¼Œå¯é€šè¿‡ä»¥ä¸‹é…ç½®å’Œå®è·µä¼˜åŒ–ï¼š")]),o._v(" "),_("h3",{attrs:{id:"_6-1-æ ¸å¿ƒå‚æ•°ä¼˜åŒ–"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-æ ¸å¿ƒå‚æ•°ä¼˜åŒ–"}},[o._v("#")]),o._v(" 6.1 æ ¸å¿ƒå‚æ•°ä¼˜åŒ–")]),o._v(" "),_("ul",[_("li",[_("code",[o._v("innodb_flush_log_at_trx_commit=1")]),o._v("ï¼šæ ¸å¿ƒä¸šåŠ¡å¿…é¡»è®¾ç½®ä¸º1ï¼Œç¡®ä¿å·²æäº¤äº‹åŠ¡çš„Redo Logä¸ä¸¢å¤±ï¼Œé¿å…å´©æºƒåæ•°æ®ä¸¢å¤±ã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_log_buffer_size")]),o._v("ï¼šé»˜è®¤16MBï¼Œè‹¥ä¸šåŠ¡å­˜åœ¨å¤§é‡å¤§äº‹åŠ¡ï¼Œå¯é€‚å½“å¢å¤§ï¼ˆå¦‚64MB~128MBï¼‰ï¼Œå‡å°‘Redo Logçš„åˆ·ç›˜æ¬¡æ•°ï¼Œæå‡æ€§èƒ½ã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_log_file_size")]),o._v("ï¼šRedo Logæ–‡ä»¶å¤§å°ï¼Œé»˜è®¤48MBã€‚å¢å¤§è¯¥å€¼ï¼ˆå¦‚1GB~4GBï¼‰å¯å‡å°‘æ—¥å¿—åˆ‡æ¢æ¬¡æ•°ï¼Œæå‡å´©æºƒæ¢å¤é€Ÿåº¦ï¼ˆé‡æ”¾æ—¥å¿—èŒƒå›´æ›´å°ï¼‰ï¼›ä½†éœ€æ³¨æ„ï¼šæ–‡ä»¶è¶Šå¤§ï¼Œå´©æºƒæ¢å¤æ—¶é‡æ”¾æ—¶é—´è¶Šé•¿ï¼Œéœ€å¹³è¡¡â€œæ—¥å¸¸æ€§èƒ½â€ä¸â€œæ¢å¤æ—¶é—´â€ã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_log_files_in_group")]),o._v("ï¼šRedo Logæ–‡ä»¶ç»„æ•°é‡ï¼Œé»˜è®¤2ä¸ªã€‚å»ºè®®ä¿æŒé»˜è®¤ï¼Œè¿‡å¤šæ–‡ä»¶ä¼šå¢åŠ ç®¡ç†å¼€é”€ã€‚")]),o._v(" "),_("li",[_("code",[o._v("innodb_purge_threads")]),o._v("ï¼šPurgeçº¿ç¨‹æ•°é‡ï¼Œé»˜è®¤4ä¸ªï¼ˆMySQL 8.0ï¼‰ã€‚è‹¥å­˜åœ¨å¤§é‡UPDATE/DELETEäº‹åŠ¡ï¼Œå¯é€‚å½“å¢å¤§ï¼ˆå¦‚8ä¸ªï¼‰ï¼ŒåŠ å¿«Undo Logæ¸…ç†é€Ÿåº¦ï¼Œé¿å…Undoæ®µè†¨èƒ€ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"_6-2-ä¸šåŠ¡å®è·µä¼˜åŒ–"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-ä¸šåŠ¡å®è·µä¼˜åŒ–"}},[o._v("#")]),o._v(" 6.2 ä¸šåŠ¡å®è·µä¼˜åŒ–")]),o._v(" "),_("ul",[_("li",[_("strong",[o._v("é¿å…é•¿äº‹åŠ¡")]),o._v("ï¼šé•¿äº‹åŠ¡ä¼šé•¿æœŸå ç”¨Undoæ®µï¼Œå¯¼è‡´Undo Logè†¨èƒ€ï¼ŒåŒæ—¶å¢åŠ å´©æºƒæ¢å¤æ—¶çš„å›æ»šæ—¶é—´ï¼ˆéœ€å›æ»šå¤§é‡æœªæäº¤äº‹åŠ¡ï¼‰ã€‚å»ºè®®æ‹†åˆ†é•¿äº‹åŠ¡ä¸ºå°äº‹åŠ¡ï¼ŒåŠæ—¶æäº¤/å›æ»šã€‚")]),o._v(" "),_("li",[_("strong",[o._v("æ§åˆ¶äº‹åŠ¡å¹¶å‘é‡")]),o._v("ï¼šè¿‡é«˜çš„å¹¶å‘äº‹åŠ¡ä¼šå¯¼è‡´Redo Logå†™å…¥é¢‘ç¹ï¼Œå¢åŠ åˆ·ç›˜å‹åŠ›ï¼›åŒæ—¶ï¼Œå´©æºƒæ¢å¤æ—¶æœªæäº¤äº‹åŠ¡æ•°é‡å¢å¤šï¼Œå›æ»šæ—¶é—´å˜é•¿ã€‚å¯é€šè¿‡è¿æ¥æ± é™åˆ¶å¹¶å‘é‡ã€‚")]),o._v(" "),_("li",[_("strong",[o._v("å®šæœŸå¤‡ä»½ä¸ç›‘æ§")]),o._v("ï¼š\n"),_("ul",[_("li",[o._v("å®šæœŸå¤‡ä»½æ•°æ®åº“ï¼ˆå¦‚æ¯æ—¥å…¨é‡+å¢é‡å¤‡ä»½ï¼‰ï¼Œé¿å…æç«¯æƒ…å†µä¸‹å´©æºƒæ¢å¤å¤±è´¥ã€‚")]),o._v(" "),_("li",[o._v("ç›‘æ§Redo Logä½¿ç”¨æƒ…å†µï¼ˆé€šè¿‡"),_("code",[o._v("SHOW ENGINE INNODB STATUS")]),o._v("æŸ¥çœ‹LSNå¢é•¿ã€checkpointè¿›åº¦ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("ç›‘æ§Undoæ®µå¤§å°ï¼Œè‹¥Undoæ®µå¼‚å¸¸è†¨èƒ€ï¼Œéœ€æ£€æŸ¥æ˜¯å¦å­˜åœ¨æœªæäº¤çš„é•¿äº‹åŠ¡æˆ–Purgeçº¿ç¨‹å¼‚å¸¸ã€‚")])])]),o._v(" "),_("li",[_("strong",[o._v("åˆç†è®¾ç½®è¡¨ç©ºé—´")]),o._v("ï¼šå°†å¤§è¡¨çš„Undo Logå­˜å‚¨åœ¨ç‹¬ç«‹è¡¨ç©ºé—´ï¼ˆå¼€å¯"),_("code",[o._v("innodb_file_per_table")]),o._v("ï¼‰ï¼Œé¿å…å…±äº«è¡¨ç©ºé—´ï¼ˆibdata1ï¼‰å› Undo Logè†¨èƒ€è€Œè¿‡å¤§ã€‚")])]),o._v(" "),_("h3",{attrs:{id:"_6-3-å¸¸è§é—®é¢˜æ’æŸ¥"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-å¸¸è§é—®é¢˜æ’æŸ¥"}},[o._v("#")]),o._v(" 6.3 å¸¸è§é—®é¢˜æ’æŸ¥")]),o._v(" "),_("h4",{attrs:{id:"_6-3-1-å´©æºƒæ¢å¤æ—¶é—´è¿‡é•¿"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-å´©æºƒæ¢å¤æ—¶é—´è¿‡é•¿"}},[o._v("#")]),o._v(" 6.3.1 å´©æºƒæ¢å¤æ—¶é—´è¿‡é•¿")]),o._v(" "),_("p",[o._v("åŸå› ï¼šRedo Logæ–‡ä»¶è¿‡å¤§ã€æœªæäº¤äº‹åŠ¡è¿‡å¤šã€Undo Logè†¨èƒ€ã€‚æ’æŸ¥æ–¹æ³•ï¼š")]),o._v(" "),_("div",{staticClass:"language-sql line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-sql"}},[_("code",[_("span",{pre:!0,attrs:{class:"token comment"}},[o._v("-- æŸ¥çœ‹Redo Logç›¸å…³ä¿¡æ¯")]),o._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("SHOW")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("ENGINE")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("INNODB")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("STATUS")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v("  "),_("span",{pre:!0,attrs:{class:"token comment"}},[o._v("-- æŸ¥çœ‹LSNã€checkpointä¿¡æ¯")]),o._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[o._v("-- æŸ¥çœ‹æœªæäº¤äº‹åŠ¡ï¼ˆå´©æºƒå‰ï¼‰")]),o._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("SELECT")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[o._v("*")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("FROM")]),o._v(" INFORMATION_SCHEMA"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(".")]),o._v("INNODB_TRX"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v("  "),_("span",{pre:!0,attrs:{class:"token comment"}},[o._v("-- è‹¥æ¢å¤åä»æœ‰æœªæäº¤äº‹åŠ¡ï¼Œéœ€æ‰‹åŠ¨å›æ»š")]),o._v("\n"),_("span",{pre:!0,attrs:{class:"token comment"}},[o._v("-- æ£€æŸ¥Undoæ®µå¤§å°")]),o._v("\n"),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("SELECT")]),o._v(" TABLE_NAME"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(",")]),o._v(" DATA_FREE "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("FROM")]),o._v(" INFORMATION_SCHEMA"),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(".")]),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("TABLES")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token keyword"}},[o._v("WHERE")]),o._v(" TABLE_SCHEMA"),_("span",{pre:!0,attrs:{class:"token operator"}},[o._v("=")]),_("span",{pre:!0,attrs:{class:"token string"}},[o._v("'mysql'")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token operator"}},[o._v("AND")]),o._v(" TABLE_NAME "),_("span",{pre:!0,attrs:{class:"token operator"}},[o._v("LIKE")]),o._v(" "),_("span",{pre:!0,attrs:{class:"token string"}},[o._v("'innodb_undo%'")]),_("span",{pre:!0,attrs:{class:"token punctuation"}},[o._v(";")]),o._v("\n")])]),o._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[o._v("1")]),_("br"),_("span",{staticClass:"line-number"},[o._v("2")]),_("br"),_("span",{staticClass:"line-number"},[o._v("3")]),_("br"),_("span",{staticClass:"line-number"},[o._v("4")]),_("br"),_("span",{staticClass:"line-number"},[o._v("5")]),_("br"),_("span",{staticClass:"line-number"},[o._v("6")]),_("br")])]),_("p",[o._v("è§£å†³æ–¹æ¡ˆï¼šå‡å°innodb_log_file_sizeã€é¿å…é•¿äº‹åŠ¡ã€ä¼˜åŒ–Purgeçº¿ç¨‹é…ç½®ã€‚")]),o._v(" "),_("h4",{attrs:{id:"_6-3-2-undo-logè†¨èƒ€å¯¼è‡´ç£ç›˜ç©ºé—´ä¸è¶³"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-2-undo-logè†¨èƒ€å¯¼è‡´ç£ç›˜ç©ºé—´ä¸è¶³"}},[o._v("#")]),o._v(" 6.3.2 Undo Logè†¨èƒ€å¯¼è‡´ç£ç›˜ç©ºé—´ä¸è¶³")]),o._v(" "),_("p",[o._v("åŸå› ï¼šå¤§é‡æœªæäº¤äº‹åŠ¡ã€Purgeçº¿ç¨‹æ¸…ç†ä¸åŠæ—¶ã€MVCCå¿«ç…§è¯»äº‹åŠ¡é•¿æœŸæœªç»“æŸã€‚è§£å†³æ–¹æ¡ˆï¼š")]),o._v(" "),_("ul",[_("li",[o._v("ç»ˆæ­¢é•¿æœŸæœªæäº¤çš„äº‹åŠ¡ï¼ˆé€šè¿‡"),_("code",[o._v("KILL")]),o._v("è¯­å¥ï¼‰ã€‚")]),o._v(" "),_("li",[o._v("å¢å¤§innodb_purge_threadsï¼ŒåŠ å¿«æ¸…ç†é€Ÿåº¦ã€‚")]),o._v(" "),_("li",[o._v("ä¼˜åŒ–MVCCè¯»äº‹åŠ¡ï¼Œé¿å…é•¿æœŸå ç”¨å¿«ç…§ï¼ˆå¦‚å‡å°‘é•¿æŸ¥è¯¢ï¼‰ã€‚")])]),o._v(" "),_("h2",{attrs:{id:"ä¸ƒã€æ€»ç»“"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ƒã€æ€»ç»“"}},[o._v("#")]),o._v(" ä¸ƒã€æ€»ç»“")]),o._v(" "),_("p",[o._v("InnoDBå´©æºƒæ¢å¤çš„æ ¸å¿ƒæ˜¯â€œRedo Log+Undo Logâ€çš„ååŒæœºåˆ¶ï¼Œå…¶åº•å±‚é€»è¾‘å¯æ€»ç»“ä¸ºï¼š")]),o._v(" "),_("ol",[_("li",[o._v("Redo Logæ˜¯ç‰©ç†æ—¥å¿—ï¼Œéµå¾ªWALåŸåˆ™ï¼Œé€šè¿‡é¡ºåºIOä¿éšœæŒä¹…æ€§ï¼Œå´©æºƒåé‡æ”¾æ‰€æœ‰ç‰©ç†å˜æ›´ï¼Œå°†æ•°æ®åº“æ¢å¤åˆ°å´©æºƒå‰çš„å†…å­˜çŠ¶æ€ã€‚")]),o._v(" "),_("li",[o._v("Undo Logæ˜¯é€»è¾‘æ—¥å¿—ï¼Œè®°å½•æ•°æ®çš„å†å²çŠ¶æ€ï¼Œä¿éšœåŸå­æ€§ï¼Œå´©æºƒåå›æ»šæ‰€æœ‰æœªæäº¤äº‹åŠ¡ï¼Œæ¸…é™¤æ— æ•ˆå˜æ›´ã€‚")]),o._v(" "),_("li",[o._v("LSNæ˜¯ä¸¤è€…ååŒçš„æ ¸å¿ƒçº½å¸¦ï¼Œé€šè¿‡LSNå…³è”Redo Logã€æ•°æ®é¡µã€Undo Logï¼Œç¡®ä¿æ¢å¤æ—¶çš„é¡ºåºæ€§å’Œå‡†ç¡®æ€§ã€‚")]),o._v(" "),_("li",[o._v("å´©æºƒæ¢å¤æµç¨‹éµå¾ªâ€œå…ˆé‡åšï¼ˆRedoï¼‰ã€åå›æ»šï¼ˆUndoï¼‰â€çš„åŸåˆ™ï¼Œæœ€ç»ˆå®ç°æ•°æ®ä¸€è‡´æ€§ã€‚")])])])}),[],!1,null,null,null);_.default=t.exports}}]);